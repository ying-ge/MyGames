<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="ç»¿è‰²ç»ˆç«¯æ‰“å­—æ¸¸æˆ - 90å¹´ä»£å¤å¤é£æ ¼çš„æ‰“å­—ç»ƒä¹ æ¸¸æˆ">
    <meta name="keywords" content="æ‰“å­—æ¸¸æˆ,ç»¿è‰²ç»ˆç«¯,å¤å¤,typing,ç»ƒä¹ ,ä¸­æ–‡æ‰“å­—,è‹±æ–‡æ‰“å­—">
    <title>ç»¿è‰²ç»ˆç«¯æ‰“å­—æ¸¸æˆ</title>

    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="ç»¿è‰²ç»ˆç«¯æ‰“å­—æ¸¸æˆ">
    <meta property="og:description" content="ä½“éªŒ90å¹´ä»£ç»¿è‰²ç»ˆç«¯é£æ ¼çš„æ‰“å­—ç»ƒä¹ æ¸¸æˆï¼">
    <meta property="og:type" content="website">
    <meta property="og:image" content="./assets/icon.png">
    <meta property="og:url" content="https://yourusername.github.io/typing-game-web/">

    <!-- Favicon -->
    <link rel="icon" href="./favicon.ico">

    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">

    <!-- Theme Color -->
    <meta name="theme-color" content="#0a0f0a">
    <meta name="msapplication-TileColor" content="#0a0f0a">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <style>
        /* CRTæ‰«æçº¿æ•ˆæœ */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                rgba(0, 255, 0, 0.03) 50%,
                rgba(0, 0, 0, 0.15) 50%
            );
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 1000;
        }

        /* CRTé—ªçƒæ•ˆæœå·²ç§»é™¤ - ç”¨æˆ·åé¦ˆä¸è¦é—ªçƒ */

        /* é¡µé¢åŸºç¡€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Courier New', 'Monaco', 'Menlo', 'VT323', monospace;
            background-color: #000000;
            color: #00ff00;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            margin: 0;
            padding: 0;
        }

        /* 90å¹´ä»£ç”µè„‘ç»ˆç«¯æ•ˆæœ */
        .terminal {
            background-color: #000000;
            border: 3px double #808080;
            border-radius: 0px;
            box-shadow:
                inset -2px -2px 0px #808080,
                inset 2px 2px 0px #c0c0c0,
                0 0 0px 2px #c0c0c0,
                0 0 0px 4px #808080,
                0 0 10px rgba(0, 255, 0, 0.2);
            margin: 20px;
            padding: 20px;
            flex: 1;
            max-width: 1200px;
            width: calc(100% - 40px);
            position: relative;
        }

        @keyframes terminal-glow {
            0% { box-shadow: 0 0 30px rgba(0, 255, 0, 0.3); }
            100% { box-shadow: 0 0 40px rgba(0, 255, 0, 0.5); }
        }

        /* å¤´éƒ¨æ ·å¼ */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #00ff00;
            background-color: #000000;
            box-shadow: inset 0 0 20px rgba(0, 255, 0, 0.05);
            text-shadow: 0 0 5px #00ff00;
        }

        .title {
            font-size: 2.5em;
            margin-bottom: 10px;
            letter-spacing: 5px;
            text-shadow: 0 0 20px #00ff00;
            /* é—ªçƒæ•ˆæœå·²ç§»é™¤ - ç”¨æˆ·åé¦ˆä¸è¦é—ªçƒ */
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.8;
            letter-spacing: 2px;
        }

        /* æ§åˆ¶åŒºåŸŸ */
        .controls-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #00ff00;
            background-color: rgba(0, 255, 0, 0.05);
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-label {
            font-size: 1.1em;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.9;
        }

        .control-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .control-btn {
            background-color: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 10px 20px;
            font-family: inherit;
            font-size: 1em;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 0;
            text-shadow: 0 0 5px #00ff00;
        }

        .control-btn:hover {
            background-color: rgba(0, 255, 0, 0.2);
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
            transform: translateY(-2px);
        }

        .control-btn.active {
            background-color: rgba(0, 255, 0, 0.3);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.8);
        }

        /* ç»Ÿè®¡ä¿¡æ¯ */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            border: 1px solid #00ff00;
            background-color: rgba(0, 255, 0, 0.05);
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }

        .stat-label {
            font-size: 0.9em;
            margin-bottom: 5px;
            text-transform: uppercase;
            opacity: 0.8;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            text-shadow: 0 0 8px #00ff00;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            width: 100%;
            height: 20px;
            border: 1px solid #00ff00;
            background-color: rgba(0, 255, 0, 0.1);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff00, #00aa00);
            box-shadow: 0 0 10px #00ff00;
            transition: width 0.3s ease;
        }

        /* æ¸¸æˆåŒºåŸŸ */
        .game-area {
            display: flex;
            flex-direction: column;
            border: 2px solid #00ff00;
            padding: 30px;
            background-color: rgba(0, 255, 0, 0.05);
            margin-bottom: 30px;
            min-height: 300px;
        }

        .word-display {
            text-align: center;
            margin-bottom: 30px;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .current-word {
            font-size: 3em;
            font-weight: bold;
            text-shadow: 0 0 20px #00ff00;
            letter-spacing: 3px;
            min-height: 1.2em;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .char {
            position: relative;
            transition: all 0.2s ease;
        }

        .char.correct {
            color: #00ff00;
            text-shadow: 0 0 15px #00ff00;
            animation: pulse 0.3s ease;
        }

        .char.incorrect {
            color: #ff0000;
            text-shadow: 0 0 15px #ff0000;
            animation: shake 0.3s ease;
        }

        .char.remaining {
            color: #00aa00;
            opacity: 0.7;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* å…‰æ ‡ */
        .cursor {
            display: inline-block;
            width: 10px;
            height: 1.2em;
            background-color: #00ff00;
            animation: blink 1s infinite;
            vertical-align: middle;
            margin-left: 2px;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* è¾“å…¥åŒºåŸŸ */
        .input-area {
            text-align: center;
            margin-bottom: 30px;
        }

        #textInput {
            background-color: rgba(0, 255, 0, 0.1);
            border: 2px solid #00ff00;
            color: #00ff00;
            padding: 20px;
            font-size: 1.8em;
            font-family: inherit;
            text-align: center;
            width: 100%;
            max-width: 500px;
            text-shadow: 0 0 5px #00ff00;
            outline: none;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
            border-radius: 5px;
        }

        #textInput:focus {
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.6);
            background-color: rgba(0, 255, 0, 0.15);
        }

        /* æ¸¸æˆç»“æŸå¼¹çª— */
        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(10, 15, 10, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .game-over.active {
            display: flex;
        }

        .game-over-content {
            text-align: center;
            padding: 40px;
            border: 2px solid #00cc00;
            background-color: rgba(0, 153, 0, 0.15);
            box-shadow: 0 0 20px rgba(0, 153, 0, 0.4);
            max-width: 500px;
            margin: 20px;
            border-radius: 10px;
        }

        .game-over-title {
            font-size: 2em;
            margin-bottom: 20px;
            text-shadow: 0 0 15px #00ff00;
        }

        .final-stats {
            margin: 20px 0;
            font-size: 1.2em;
            line-height: 1.6;
        }

        .final-stats div {
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
        }

        .final-stats span {
            color: #00aa00;
            font-weight: bold;
            text-shadow: 0 0 8px #00aa00;
        }

        .final-buttons {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .game-over-btn {
            background-color: rgba(0, 255, 0, 0.1);
            border: 2px solid #00ff00;
            color: #00aa00;
            padding: 15px 30px;
            font-family: inherit;
            font-size: 1.1em;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 5px;
            text-shadow: 0 0 5px #00aa00;
        }

        .game-over-btn:hover {
            background-color: rgba(0, 255, 0, 0.3);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.8);
            transform: translateY(-2px);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .terminal {
                margin: 10px;
                padding: 15px;
                border-radius: 5px;
            }

            .title {
                font-size: 2em;
            }

            .current-word {
                font-size: 2.2em;
            }

            #textInput {
                font-size: 1.5em;
                padding: 15px;
            }

            .control-buttons {
                gap: 8px;
            }

            .control-btn {
                padding: 8px 16px;
                font-size: 0.9em;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .terminal {
                margin: 5px;
                padding: 10px;
            }

            .title {
                font-size: 1.8em;
                margin-bottom: 5px;
            }

            .subtitle {
                font-size: 1em;
            }

            .current-word {
                font-size: 2em;
            }

            #textInput {
                font-size: 1.3em;
                padding: 12px;
            }

            .stats {
                grid-template-columns: 1fr;
            }

            .game-over-content {
                padding: 30px 20px;
                margin: 10px;
            }
        }

        /* æš—è‰²æ¨¡å¼æ”¯æŒ */
        @media (prefers-color-scheme: dark) {
            /* æ·±è‰²æ¨¡å¼å·²ç»æ˜¯é»˜è®¤æ ·å¼ */
        }

        @media (prefers-color-scheme: light) {
            /* æµ…è‰²æ¨¡å¼é€‚é… */
            body {
                background-color: #f0f0f0;
                color: #006600;
            }

            .terminal {
                background-color: #f8f8f8;
                border-color: #006600;
            }

            .header {
                background-color: rgba(0, 102, 0, 0.1);
                border-color: #006600;
                color: #006600;
            }

            .control-btn {
                background-color: rgba(0, 102, 0, 0.1);
                border-color: #006600;
                color: #006600;
            }

            .control-btn:hover {
                background-color: rgba(0, 102, 0, 0.2);
            }

            .control-btn.active {
                background-color: rgba(0, 102, 0, 0.3);
            }

            .stat-item {
                background-color: rgba(0, 102, 0, 0.05);
                border-color: #006600;
                color: #006600;
            }

            #textInput {
                background-color: rgba(0, 102, 0, 0.1);
                border-color: #006600;
                color: #006600;
            }

            .current-word {
                color: #006600;
                text-shadow: 0 0 15px #006600;
            }

            .char.correct {
                color: #006600;
                text-shadow: 0 0 15px #006600;
            }

            .char.remaining {
                color: #004400;
            }

            .cursor {
                background-color: #006600;
            }

            .game-over {
                background-color: rgba(240, 240, 240, 0.95);
            }

            .game-over-content {
                border-color: #009900;
                background-color: rgba(0, 153, 0, 0.12);
                color: #006600;
            }
        }

        /* æ— éšœç¢æ€§ */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
            }

            .terminal {
                animation: none;
            }

            .control-btn:hover {
                transform: none;
            }

            .game-over-btn:hover {
                transform: none;
            }
        }

        /* æ‰“å°æ ·å¼ */
        @media print {
            body {
                background-color: white;
                color: black;
            }

            .terminal {
                border: 1px solid #000;
                box-shadow: none;
            }

            .cursor {
                display: none;
            }

            body::before {
                display: none;
            }
        }

        /* ç„¦ç‚¹æ ·å¼ */
        #textInput:focus-visible {
            outline: 2px solid #00ff00;
            outline-offset: 2px;
        }

        /* é€‰æ‹©æ–‡æœ¬æ ·å¼ */
        ::selection {
            background-color: #00ff00;
            color: #0a0f0a;
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 255, 0, 0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: #00ff00;
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #00cc00;
        }

        /* è‡ªå®šä¹‰è¯æ±‡æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            font-family: 'Courier New', monospace;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: #000000;
            border: 2px solid #00ff00;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
            color: #00ff00;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            background-color: rgba(0, 255, 0, 0.1);
            padding: 20px;
            border-bottom: 1px solid #00ff00;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5em;
            text-shadow: 0 0 10px #00ff00;
        }

        .modal-close {
            background: none;
            border: 1px solid #00ff00;
            color: #00ff00;
            font-size: 24px;
            cursor: pointer;
            padding: 5px 10px;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background-color: rgba(0, 255, 0, 0.2);
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
        }

        .modal-body {
            padding: 20px;
        }

        .vocab-input-section {
            margin-bottom: 30px;
        }

        .input-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #00ff00;
        }

        .tab-btn {
            background: none;
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 10px 20px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: -1px;
            transition: all 0.3s ease;
        }

        .tab-btn.active,
        .tab-btn:hover {
            background-color: rgba(0, 255, 0, 0.2);
            border-bottom-color: #000000;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }

        #vocabTextarea {
            width: 100%;
            height: 150px;
            background-color: rgba(0, 255, 0, 0.05);
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
        }

        #vocabTextarea:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        }

        #vocabFile {
            background-color: rgba(0, 255, 0, 0.05);
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 10px;
            width: 100%;
        }

        .file-info {
            margin-top: 10px;
            font-size: 12px;
            opacity: 0.7;
        }

        .delimiter-detection {
            background-color: rgba(0, 255, 0, 0.05);
            border: 1px solid #00ff00;
            padding: 20px;
            margin-bottom: 30px;
        }

        .delimiter-detection h3 {
            margin-top: 0;
            margin-bottom: 15px;
        }

        .detected-delimiter {
            margin-bottom: 15px;
            font-weight: bold;
        }

        .delimiter-value {
            color: #ffff00;
            text-shadow: 0 0 5px #ffff00;
        }

        .delimiter-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        .delimiter-options label {
            display: flex;
            align-items: center;
            cursor: pointer;
            margin: 0;
        }

        .delimiter-options input[type="radio"] {
            margin-right: 8px;
        }

        .vocab-preview {
            margin-bottom: 30px;
        }

        .vocab-preview h3 {
            margin-top: 0;
            margin-bottom: 15px;
        }

        .preview-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background-color: rgba(0, 255, 0, 0.05);
            border: 1px solid #00ff00;
        }

        .btn-small {
            background-color: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 5px 15px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .btn-small:hover {
            background-color: rgba(0, 255, 0, 0.3);
        }

        .preview-container {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #00ff00;
            background-color: rgba(0, 255, 0, 0.02);
        }

        .vocab-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 15px;
        }

        .vocab-item {
            background-color: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 14px;
            position: relative;
        }

        .vocab-item .remove-item {
            margin-left: 8px;
            color: #ff4444;
            cursor: pointer;
            font-weight: bold;
        }

        .vocab-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-primary {
            background-color: rgba(0, 255, 0, 0.2);
            border: 2px solid #00ff00;
            color: #00ff00;
            padding: 12px 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background-color: rgba(0, 255, 0, 0.4);
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.8);
        }

        .btn-secondary {
            background-color: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background-color: rgba(0, 255, 0, 0.3);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .modal-content {
                width: 95%;
                margin: 10px;
            }

            .modal-header {
                padding: 15px;
            }

            .modal-body {
                padding: 15px;
            }

            .delimiter-options {
                grid-template-columns: 1fr;
            }

            .vocab-actions {
                flex-direction: column;
                align-items: center;
            }

            .btn-primary,
            .btn-secondary {
                width: 100%;
                max-width: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="terminal">
        <header class="header">
            <h1 class="title">DOSæ—¶ä»£æ‰“å­—</h1>
            <div class="subtitle">SYSTEM READY...</div>
        </header>

        <div class="controls-section">
            <div class="control-group">
                <div class="control-label">é€‰æ‹©è¯­è¨€</div>
                <div class="control-buttons">
                    <button class="control-btn active" id="chineseBtn" data-lang="chinese">ä¸­æ–‡</button>
                    <button class="control-btn" id="englishBtn" data-lang="english">English</button>
                    <button class="control-btn" id="idiomBtn" data-lang="idiom">æˆè¯­</button>
                    <button class="control-btn" id="customBtn" data-lang="custom">è‡ªå®šä¹‰</button>
                </div>
            </div>

            <div class="control-group">
                <div class="control-label">é€‰æ‹©å¹´çº§</div>
                <div class="control-buttons">
                    <button class="control-btn active" data-level="easy">å°å­¦å››å¹´çº§</button>
                    <button class="control-btn" data-level="medium">å°å­¦äº”å…­å¹´çº§</button>
                    <button class="control-btn" data-level="hard">åˆä¸­ä¸€ã€äºŒå¹´çº§</button>
                    <button class="control-btn" data-level="extreme">åˆä¸­ä¸‰å¹´çº§åˆ°é«˜ä¸­</button>
                    <button class="control-btn" data-level="university">å¤§å­¦é˜¶æ®µ</button>
                    <button class="control-btn" data-level="graduate">ç ”ç©¶ç”Ÿé˜¶æ®µ</button>
                </div>
            </div>

            <div class="control-group">
                <div class="control-buttons">
                    <button class="control-btn" id="startBtn">å¼€å§‹æ¸¸æˆ</button>
                    <button class="control-btn" id="pauseBtn" style="display: none;">æš‚åœ</button>
                    <button class="control-btn" id="resetBtn">é‡ç½®</button>
                    <button class="control-btn" id="audioBtn">ğŸ”Š</button>
                </div>
            </div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">æ—¶é—´</div>
                <div class="stat-value" id="timer">60</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">WPM</div>
                <div class="stat-value" id="wpm">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">å‡†ç¡®ç‡</div>
                <div class="stat-value" id="accuracy">100%</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">å¾—åˆ†</div>
                <div class="stat-value" id="score">0</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>

        <div class="game-area">
            <div class="word-display">
                <div class="current-word" id="currentWord">
                    <span class="cursor"></span>
                </div>
            </div>

            <div class="input-area">
                <input type="text" id="textInput" placeholder="è¾“å…¥æ˜¾ç¤ºçš„æ–‡å­—..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
            </div>
        </div>

        <div class="game-over" id="gameOver">
            <div class="game-over-content">
                <h2 class="game-over-title">æ¸¸æˆç»“æŸ!</h2>
                <div class="final-stats">
                    <div><span>æœ€ç»ˆå¾—åˆ†:</span> <span id="finalScore">0</span></div>
                    <div><span>å¹³å‡ WPM:</span> <span id="finalWpm">0</span></div>
                    <div><span>å‡†ç¡®ç‡:</span> <span id="finalAccuracy">0%</span></div>
                    <div><span>å®Œæˆå•è¯:</span> <span id="totalWords">0</span></div>
                </div>
                <div class="final-buttons">
                    <button class="game-over-btn" id="restartBtn">å†ç©ä¸€æ¬¡</button>
                    <button class="game-over-btn" id="shareBtn">åˆ†äº«</button>
                </div>
            </div>
        </div>
    </div>

    <!-- è‡ªå®šä¹‰è¯æ±‡æ¨¡æ€æ¡† -->
    <div class="modal" id="customVocabModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“ è‡ªå®šä¹‰è¯æ±‡è¡¨</h2>
                <button class="modal-close" id="closeCustomModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="vocab-input-section">
                    <div class="input-tabs">
                        <button class="tab-btn active" data-tab="paste">ğŸ“‹ å¤åˆ¶ç²˜è´´</button>
                        <button class="tab-btn" data-tab="upload">ğŸ“ æ–‡ä»¶ä¸Šä¼ </button>
                    </div>

                    <div class="tab-content active" id="pasteTab">
                        <div class="input-group">
                            <label for="vocabTextarea">ç²˜è´´æ‚¨çš„è¯æ±‡å†…å®¹ï¼š</label>
                            <textarea id="vocabTextarea" placeholder="è¯·ç²˜è´´è¯æ±‡å†…å®¹ï¼Œæ”¯æŒå¤šç§åˆ†éš”ç¬¦ï¼š&#10;â€¢ æ¢è¡Œåˆ†éš”&#10;â€¢ é€—å·åˆ†éš”&#10;â€¢ ç©ºæ ¼åˆ†éš”&#10;â€¢ é¡¿å·åˆ†éš”&#10;â€¢ åˆ†å·åˆ†éš”&#10;&#10;ä¾‹å¦‚ï¼š&#10;apple, banana, orange&#10;æˆ–&#10;è‹¹æœ é¦™è•‰ æ©™å­&#10;æˆ–&#10;è‹¹æœã€é¦™è•‰ã€æ©™å­"></textarea>
                        </div>
                    </div>

                    <div class="tab-content" id="uploadTab">
                        <div class="input-group">
                            <label for="vocabFile">é€‰æ‹©æ–‡æœ¬æ–‡ä»¶ï¼š</label>
                            <input type="file" id="vocabFile" accept=".txt,.csv,.md" />
                            <div class="file-info">æ”¯æŒ .txt, .csv, .md æ ¼å¼æ–‡ä»¶</div>
                        </div>
                    </div>
                </div>

                <div class="delimiter-detection">
                    <h3>ğŸ” åˆ†éš”ç¬¦æ£€æµ‹</h3>
                    <div class="detected-delimiter">
                        <span>æ£€æµ‹åˆ°åˆ†éš”ç¬¦ï¼š</span>
                        <span id="detectedDelimiter" class="delimiter-value">è‡ªåŠ¨æ£€æµ‹ä¸­...</span>
                    </div>
                    <div class="delimiter-options">
                        <label><input type="radio" name="delimiter" value="auto" checked> è‡ªåŠ¨æ£€æµ‹</label>
                        <label><input type="radio" name="delimiter" value=","> é€—å· (,)</label>
                        <label><input type="radio" name="delimiter" value=" "> ç©ºæ ¼</label>
                        <label><input type="radio" name="delimiter" value="\n"> æ¢è¡Œ</label>
                        <label><input type="radio" name="delimiter" value="ã€"> é¡¿å· (ã€)</label>
                        <label><input type="radio" name="delimiter" value=";"> åˆ†å· (;)</label>
                    </div>
                </div>

                <div class="vocab-preview">
                    <h3>ğŸ“– è¯æ±‡é¢„è§ˆ</h3>
                    <div class="preview-stats">
                        <span>æ£€æµ‹åˆ°è¯æ±‡æ•°é‡ï¼š<strong id="vocabCount">0</strong></span>
                        <button class="btn-small" id="shuffleVocab">ğŸ”€ éšæœºæ’åº</button>
                    </div>
                    <div class="preview-container">
                        <div id="vocabPreview" class="vocab-list"></div>
                    </div>
                </div>

                <div class="vocab-actions">
                    <button class="btn-primary" id="saveCustomVocab">ğŸ’¾ ä¿å­˜è¯æ±‡è¡¨</button>
                    <button class="btn-secondary" id="clearCustomVocab">ğŸ—‘ï¸ æ¸…ç©º</button>
                    <button class="btn-secondary" id="exportCustomVocab">ğŸ“¤ å¯¼å‡ºè¯æ±‡</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        class TypingGame {
            constructor() {
                // è¯æ±‡åº“ - åŸºäºå°å­¦å››å¹´çº§åˆ°é«˜ä¸­æ•™æå¿…ä¼šè¯æ±‡
                this.words = {
                    easy: [
                        // å°å­¦å››å¹´çº§è¯æ±‡
                        'science', 'experiment', 'discover', 'invent', 'create', 'build', 'design', 'solve', 'think', 'know',
                        'computer', 'internet', 'email', 'website', 'game', 'program', 'mouse', 'keyboard', 'screen', 'type',
                        'library', 'bookstore', 'magazine', 'newspaper', 'dictionary', 'letter', 'write', 'send', 'receive', 'read',
                        'kitchen', 'bedroom', 'bathroom', 'living', 'room', 'house', 'apartment', 'building', 'street', 'city',
                        'vegetable', 'tomato', 'potato', 'onion', 'carrot', 'cabbage', 'salad', 'soup', 'cook', 'prepare',
                        'sport', 'football', 'basketball', 'tennis', 'swimming', 'running', 'team', 'player', 'win', 'lose',
                        'animal', 'zoo', 'wild', 'pet', 'feed', 'care', 'protect', 'save', 'environment', 'nature',
                        'beautiful', 'wonderful', 'interesting', 'delicious', 'important', 'difficult', 'easy', 'hard', 'quick', 'slow',
                        'spring', 'summer', 'autumn', 'winter', 'season', 'weather', 'warm', 'cool', 'hot', 'cold',
                        'garden', 'park', 'zoo', 'farm', 'forest', 'mountain', 'river', 'lake', 'beach', 'island',
                        'teacher', 'student', 'class', 'lesson', 'homework', 'test', 'grade', 'learn', 'teach', 'study',
                        'hospital', 'doctor', 'nurse', 'medicine', 'healthy', 'sick', 'hurt', 'pain', 'rest', 'exercise',
                        'birthday', 'party', 'present', 'celebrate', 'fun', 'enjoy', 'laugh', 'smile', 'cry', 'happy',
                        'bicycle', 'car', 'bus', 'train', 'plane', 'boat', 'travel', 'visit', 'trip', 'journey',
                        'music', 'song', 'radio', 'television', 'movie', 'story', 'picture', 'photo', 'camera', 'art'
                    ],
                    medium: [
                        // å°å­¦äº”ã€å…­å¹´çº§è¯æ±‡
                        'knowledge', 'information', 'technology', 'communication', 'transportation', 'population', 'economy', 'development', 'progress', 'success',
                        'history', 'ancient', 'modern', 'culture', 'tradition', 'custom', 'festival', 'ceremony', 'celebration', 'nation',
                        'geography', 'country', 'capital', 'continent', 'ocean', 'direction', 'north', 'south', 'east', 'west',
                        'mathematics', 'number', 'calculate', 'measure', 'problem', 'solution', 'answer', 'question', 'method', 'formula',
                        'language', 'grammar', 'vocabulary', 'pronunciation', 'conversation', 'expression', 'meaning', 'translate', 'understand', 'explain',
                        'physics', 'energy', 'force', 'motion', 'electricity', 'magnet', 'machine', 'engine', 'power', 'light',
                        'chemistry', 'element', 'mixture', 'reaction', 'experiment', 'laboratory', 'safety', 'material', 'substance', 'change',
                        'biology', 'plant', 'animal', 'human', 'body', 'organ', 'cell', 'life', 'grow', 'develop',
                        'literature', 'poem', 'novel', 'character', 'plot', 'theme', 'author', 'imagination', 'creativity', 'expression',
                        'psychology', 'mind', 'behavior', 'feeling', 'emotion', 'personality', 'memory', 'dream', 'think', 'believe',
                        'government', 'democracy', 'citizen', 'right', 'responsibility', 'law', 'rule', 'order', 'society', 'community',
                        'economy', 'business', 'industry', 'agriculture', 'service', 'trade', 'market', 'price', 'money', 'bank',
                        'education', 'university', 'college', 'degree', 'diploma', 'career', 'profession', 'skill', 'talent', 'ability',
                        'environment', 'pollution', 'recycle', 'conserve', 'protect', 'sustainable', 'climate', 'global', 'warming', 'future',
                        'technology', 'innovation', 'research', 'discovery', 'invention', 'robot', 'artificial', 'digital', 'network', 'data',
                        'health', 'nutrition', 'diet', 'exercise', 'fitness', 'disease', 'prevention', 'treatment', 'medicine', 'doctor',
                        'art', 'museum', 'gallery', 'painting', 'sculpture', 'music', 'concert', 'performance', 'theater', 'culture'
                    ],
                    hard: [
                        // åˆä¸­ä¸€ã€äºŒå¹´çº§è¯æ±‡
                        'achievement', 'advancement', 'civilization', 'contribution', 'development', 'establishment', 'government', 'improvement', 'organization', 'relationship',
                        'architecture', 'construction', 'engineering', 'infrastructure', 'technology', 'telecommunication', 'transportation', 'manufacturing', 'production', 'distribution',
                        'biotechnology', 'genetics', 'evolution', 'ecosystem', 'environment', 'conservation', 'biodiversity', 'sustainability', 'renewable', 'pollution',
                        'philosophy', 'psychology', 'sociology', 'anthropology', 'archaeology', 'history', 'literature', 'linguistics', 'economics', 'geography',
                        'mathematics', 'algebra', 'geometry', 'statistics', 'calculus', 'physics', 'chemistry', 'biology', 'astronomy', 'geology',
                        'democracy', 'republic', 'parliament', 'election', 'campaign', 'candidate', 'constitution', 'legislation', 'policy', 'diplomacy',
                        'globalization', 'international', 'multinational', 'corporation', 'enterprise', 'entrepreneurship', 'investment', 'finance', 'currency', 'market',
                        'communication', 'information', 'digital', 'cyber', 'security', 'privacy', 'network', 'database', 'software', 'hardware',
                        'medicine', 'healthcare', 'treatment', 'diagnosis', 'prevention', 'vaccination', 'therapy', 'rehabilitation', 'psychology', 'psychiatry',
                        'education', 'curriculum', 'pedagogy', 'assessment', 'evaluation', 'learning', 'teaching', 'knowledge', 'skill', 'competence',
                        'atmosphere', 'hydrosphere', 'lithosphere', 'biosphere', 'ecosystem', 'photosynthesis', 'respiration', 'metabolism', 'genetics', 'heredity',
                        'electromagnetic', 'gravitational', 'nuclear', 'chemical', 'mechanical', 'thermal', 'kinetic', 'potential', 'renewable', 'sustainable',
                        'industrial', 'agricultural', 'commercial', 'residential', 'urban', 'rural', 'suburban', 'metropolitan', 'cosmopolitan', 'provincial',
                        'traditional', 'contemporary', 'classical', 'modern', 'postmodern', 'abstract', 'concrete', 'theoretical', 'practical', 'experimental'
                    ],
                    extreme: [
                        // åˆä¸­ä¸‰å¹´çº§åˆ°é«˜ä¸­è¯æ±‡
                        'quantum', 'mechanics', 'relativity', 'thermodynamics', 'electromagnetism', 'particle', 'wave', 'radiation', 'spectrum', 'frequency',
                        'microbiology', 'biochemistry', 'neuroscience', 'immunology', 'endocrinology', 'pharmacology', 'epidemiology', 'pathology', 'anatomy', 'physiology',
                        'jurisprudence', 'legislation', 'regulation', 'compliance', 'litigation', 'arbitration', 'mediation', 'testimony', 'evidence', 'jurisdiction',
                        'macroeconomics', 'microeconomics', 'monetary', 'fiscal', 'inflation', 'recession', 'prosperity', 'investment', 'diversification', 'portfolio',
                        'linguistics', 'semantics', 'syntax', 'phonetics', 'morphology', 'pragmatics', 'discourse', 'rhetoric', 'composition', 'literature',
                        'archaeology', 'anthropology', 'paleontology', 'geology', 'meteorology', 'climatology', 'oceanography', 'astronomy', 'astrophysics', 'cosmology',
                        'demographics', 'statistics', 'probability', 'calculus', 'trigonometry', 'geometry', 'algebra', 'arithmetic', 'combinatorics', 'logic',
                        'architecture', 'engineering', 'civil', 'mechanical', 'electrical', 'chemical', 'biomedical', 'aerospace', 'naval', 'environmental',
                        'journalism', 'broadcasting', 'publishing', 'advertising', 'marketing', 'public relations', 'media', 'communication', 'entertainment', 'culture',
                        'psychology', 'sociology', 'anthropology', 'political science', 'international relations', 'public administration', 'social work', 'counseling', 'therapy',
                        'biotechnology', 'genetic engineering', 'nanotechnology', 'artificial intelligence', 'machine learning', 'neural networks', 'robotics', 'automation',
                        'sustainable', 'development', 'conservation', 'preservation', 'restoration', 'rehabilitation', 'remediation', 'mitigation', 'adaptation', 'resilience',
                        'globalization', 'interdependence', 'multiculturalism', 'diversity', 'inclusion', 'equity', 'justice', 'human rights', 'civil liberties', 'democracy',
                        'entrepreneurship', 'innovation', 'creativity', 'leadership', 'management', 'strategy', 'planning', 'execution', 'evaluation', 'improvement',
                        'research', 'methodology', 'analysis', 'synthesis', 'evaluation', 'implementation', 'presentation', 'publication', 'collaboration', 'scholarship'
                    ],
                    university: [
                        // å¤§å­¦é˜¶æ®µè¯æ±‡ - ä»…ä½¿ç”¨æä¾›çš„è‹±æ–‡è¯æ±‡
                        'cell', 'gene', 'protein', 'RNA', 'DNA', 'expression', 'mutation', 'survival', 'risk', 'prognosis',
                        'boxplot', 'bar', 'scatter', 'heatmap', 'volcano', 'bubble', 'radar', 'correlation', 'cluster', 'classify',
                        'differential', 'enrichment', 'pathway', 'grid', 'fit', 'score', 'rank', 'compare', 'validate', 'predict'
                    ],
                    graduate: [
                        // ç ”ç©¶ç”Ÿé˜¶æ®µè¯æ±‡ - ä»…ä½¿ç”¨æä¾›çš„è‹±æ–‡è¯æ±‡
                        'methylation', 'epigenetic', 'transcriptome', 'proteome', 'metabolome', 'single', 'cell', 'spatial', 'transcriptome', 'chromatin', 'accessibility',
                        'immunotherapy', 'drug', 'sensitivity', 'gene', 'set', 'enrichment', 'PCA', 'tSNE', 'UMAP', 'WGCNA', 'survival', 'forest',
                        'logistic', 'regression', 'support', 'vector', 'machine', 'SVM', 'random', 'forest',
                        'TMB', 'neoantigen', 'immune', 'infiltration', 'microenvironment', 'biomarker', 'molecular', 'subtype', 'CNV', 'somatic', 'mutation',
                        'mismatch', 'repair', 'MSI', 'microsatellite', 'instability',
                        'elastic', 'net', 'LASSO', 'ridge', 'regression', 'cross', 'validation', 'Bayesian', 'Markov', 'Monte', 'Carlo', 'Bootstrap',
                        'permutation', 'test', 'multiple', 'testing', 'correction', 'false', 'discovery', 'rate', 'FDR'
                    ]
                };

                this.idiomWords = {
                    easy: [
                        // å°å­¦é«˜å¹´çº§æˆè¯­
                        'ä¸€å¿ƒä¸€æ„', 'ä¸‰å¿ƒäºŒæ„', 'å››é¢å…«æ–¹', 'äº”é¢œå…­è‰²', 'ä¸ƒä¸Šå…«ä¸‹', 'ä¹ç‰›ä¸€æ¯›', 'åå…¨åç¾',
                        'ä¸€å¸†é£é¡º', 'ä¸€é¸£æƒŠäºº', 'ä¸€ä¸¾ä¸¤å¾—', 'ä¸€ç®­åŒé›•', 'ä¸€çŸ³äºŒé¸Ÿ', 'ä¸€çŸ¥åŠè§£', 'ä¸€è¡¨äººæ‰',
                        'äººå±±äººæµ·', 'äººå£°é¼æ²¸', 'äººæ‰è¾ˆå‡º', 'äººæ¥äººå¾€', 'äººå±±äººæµ·', 'äººæ°åœ°çµ', 'äººä»°é©¬ç¿»',
                        'å¤§å…¬æ— ç§', 'å¤§ä¹‰ç­äº²', 'å¤§æƒŠå¤±è‰²', 'å¤§å–œè¿‡æœ›', 'å¤§æ¨¡å¤§æ ·', 'å¤§å¼ æ——é¼“', 'å¤§æ˜¾èº«æ‰‹',
                        'å°å¿ƒè°¨æ…', 'å°é¢˜å¤§åš', 'å°å·§ç²ç‘', 'å°è¯•ç‰›åˆ€', 'å°å®¶ç¢§ç‰', 'å°ä¸å¿åˆ™ä¹±å¤§è°‹',
                        'åƒå†›ä¸‡é©¬', 'åƒæ–¹ç™¾è®¡', 'åƒå˜ä¸‡åŒ–', 'åƒå¤´ä¸‡ç»ª', 'åƒè¾›ä¸‡è‹¦', 'åƒè¨€ä¸‡è¯­', 'åƒé’§ä¸€å‘',
                        'é£å’Œæ—¥ä¸½', 'é£å¹³æµªé™', 'é£é©°ç”µæ£', 'é£å·æ®‹äº‘', 'é£é›¨æ— é˜»', 'é£é›¨åŒèˆŸ', 'é£é¤éœ²å®¿'
                    ],
                    medium: [
                        // åˆä¸­ä½å¹´çº§æˆè¯­
                        'ç”»é¾™ç‚¹ç›', 'ç”»è›‡æ·»è¶³', 'æ©è€³ç›—é“ƒ', 'äº¡ç¾Šè¡¥ç‰¢', 'æäººå¿§å¤©', 'é‚¯éƒ¸å­¦æ­¥', 'åˆ»èˆŸæ±‚å‰‘',
                        'å¶å…¬å¥½é¾™', 'å¯¹ç‰›å¼¹ç´', 'ç­é—¨å¼„æ–§', 'åäº•è§‚å¤©', 'ç›²äººæ‘¸è±¡', 'ä¹°æ¤Ÿè¿˜ç ', 'èµ°é©¬è§‚èŠ±',
                        'èƒ¸æœ‰æˆç«¹', 'å¾—å¿ƒåº”æ‰‹', 'å·¦å³é€¢æº', 'æ°´åˆ°æ¸ æˆ', 'é¡ºç†æˆç« ', 'è‡ªç„¶è€Œç„¶', 'è½»è€Œæ˜“ä¸¾',
                        'æŒä¹‹ä»¥æ’', 'åšæŒä¸æ‡ˆ', 'é”²è€Œä¸èˆ', 'ç™¾æŠ˜ä¸æŒ ', 'ä¸å±ˆä¸æŒ ', 'å†æ¥å†å‰', 'ç²¾ç›Šæ±‚ç²¾',
                        'æ¬£æ¬£å‘è£', 'è’¸è’¸æ—¥ä¸Š', 'æ—¥æ–°æœˆå¼‚', 'çªé£çŒ›è¿›', 'ä¸€æ—¥åƒé‡Œ', 'æ—¥ç§¯æœˆç´¯', 'æ°´æ»´çŸ³ç©¿',
                        'å’Œç¦ç›¸å¤„', 'å›¢ç»“å‹çˆ±', 'äº’å¸®äº’åŠ©', 'ç›¸æ¿¡ä»¥æ²«', 'åŒèˆŸå…±æµ', 'é£é›¨åŒèˆŸ', 'æ‚£éš¾ä¸å…±',
                        'å‹¤å­¦å¥½é—®', 'åšè§ˆç¾¤ä¹¦', 'å­¦æ— æ­¢å¢ƒ', 'è¯²äººä¸å€¦', 'æ•™å­¦ç›¸é•¿', 'ä¸è€»ä¸‹é—®', 'å¾ªåºæ¸è¿›',
                        'å…‰æ˜æ­£å¤§', 'å ‚å ‚æ­£æ­£', 'åæ­£è¨€é¡º', 'ç†ç›´æ°”å£®', 'ä¹‰æ­£è¯ä¸¥', 'å…‰æ˜ç£Šè½', 'å¤§å…¬æ— ç§'
                    ],
                    hard: [
                        // åˆä¸­é«˜å¹´çº§æˆè¯­
                        'å¿—åŒé“åˆ', 'å¿—åœ¨å››æ–¹', 'å¿—å­˜é«˜è¿œ', 'é›„å¿ƒå£®å¿—', 'å¤§å±•å®å›¾', 'å‰ç¨‹ä¼¼é”¦', 'é”¦ç»£å‰ç¨‹',
                        'å¾·æ‰å…¼å¤‡', 'å“å­¦å…¼ä¼˜', 'æ‰è²ŒåŒå…¨', 'æ–‡æ­¦åŒå…¨', 'èƒ½æ–‡èƒ½æ­¦', 'èƒ½è¯´ä¼šé“', 'èƒ½å·¥å·§åŒ ',
                        'è‰°è‹¦å¥‹æ–—', 'å‹¤ä¿­èŠ‚çº¦', 'å‹¤å‹¤æ³æ³', 'å…¢å…¢ä¸šä¸š', 'ä¸€ä¸ä¸è‹Ÿ', 'ç²¾ç›Šæ±‚ç²¾', 'å®äº‹æ±‚æ˜¯',
                        'å®äº‹æ±‚æ˜¯', 'æ±‚çœŸåŠ¡å®', 'è„šè¸å®åœ°', 'åŸ‹å¤´è‹¦å¹²', 'ä»»åŠ³ä»»æ€¨', 'é»˜é»˜æ— é—»', 'æ— ç§å¥‰çŒ®',
                        'å›¢ç»“ä¸€è‡´', 'åŒå¿ƒååŠ›', 'é½å¿ƒååŠ›', 'ç¾¤ç­–ç¾¤åŠ›', 'é›†æ€å¹¿ç›Š', 'ä¼—å¿—æˆåŸ', 'ä¸‡ä¼—ä¸€å¿ƒ',
                        'ç»§å¾€å¼€æ¥', 'æ‰¿å‰å¯å', 'ä¸æ—¶ä¿±è¿›', 'å¼€æ‹“åˆ›æ–°', 'é”æ„è¿›å–', 'å‹‡äºåˆ›æ–°', 'æ•¢äºæ‹…å½“',
                        'èƒ¸æ€€å¤§å¿—', 'é«˜ç»è¿œç©', 'æ·±è°‹è¿œè™‘', 'è¿œè§å“è¯†', 'æ˜å¯Ÿç§‹æ¯«', 'æ´è‹¥è§‚ç«', 'ç«çœ¼é‡‘ç›',
                        'ä¸´å±ä¸æƒ§', 'æ³°ç„¶è‡ªè‹¥', 'ä»å®¹ä¸è¿«', 'å¤„å˜ä¸æƒŠ', 'é•‡å®šè‡ªè‹¥', 'ä¸´å±ä¸ä¹±', 'å¤„ä¹‹æ³°ç„¶',
                        'å¥‹å‘å›¾å¼º', 'è‡ªå¼ºä¸æ¯', 'ç™¾æŠ˜ä¸æŒ ', 'åšéŸ§ä¸æ‹”', 'é”²è€Œä¸èˆ', 'æŒä¹‹ä»¥æ’', 'åšæŒä¸æ‡ˆ'
                    ],
                    extreme: [
                        // é«˜ä¸­æˆè¯­
                        'é èº¬å°½ç˜', 'æ­»è€Œåå·²', 'å‘•å¿ƒæ²¥è¡€', 'å§è–ªå°èƒ†', 'ç ´é‡œæ²‰èˆŸ', 'èƒŒæ°´ä¸€æˆ˜', 'ä¹‰æ— åé¡¾',
                        'èˆç”Ÿå–ä¹‰', 'è§†æ­»å¦‚å½’', 'å®æ­»ä¸å±ˆ', 'å¤§ä¹‰å‡›ç„¶', 'ä¸´å±ä¸æƒ§', 'å¨æ­¦ä¸å±ˆ', 'åšè´ä¸å±ˆ',
                        'é«˜ç»è¿œç©', 'è¿œè§å“è¯†', 'æ·±è°‹è¿œè™‘', 'æ·±æ€ç†Ÿè™‘', 'æ·±æ€ç†Ÿè™‘', 'è€è°‹æ·±ç®—', 'æ·±æ€ç†Ÿè™‘',
                        'é›„æ‰å¤§ç•¥', 'ç»å¤©çº¬åœ°', 'ç»å¤©çº¬åœ°', 'ç»çº¶æµä¸–', 'ç»ä¸–ä¹‹æ‰', 'åŒ¡æ—¶æµä¸–', 'ç»å¤©çº¬åœ°',
                        'å¾·é«˜æœ›é‡', 'å¾·æ‰å…¼å¤‡', 'æ‰å¾·å…¼å¤‡', 'å¾·æ‰å…¼å¤‡', 'å“å­¦å…¼ä¼˜', 'å“å­¦å…¼ä¼˜', 'æ‰è²ŒåŒå…¨',
                        'åšå¤é€šä»Š', 'åšå­¦å¤šæ‰', 'åšè§ˆç¾¤ä¹¦', 'å­¦å¯Œäº”è½¦', 'æ‰é«˜å…«æ–—', 'æ»¡è…¹ç»çº¶', 'æ‰åæ¨ªæº¢',
                        'è¿ç­¹å¸·å¹„', 'å†³èƒœåƒé‡Œ', 'æ–™äº‹å¦‚ç¥', 'ç¥æœºå¦™ç®—', 'æœªåœå…ˆçŸ¥', 'å…ˆè§ä¹‹æ˜', 'æ–™äº‹å¦‚ç¥',
                        'å‡ºç±»æ‹”èƒ', 'è¶…ç¾¤ç»ä¼¦', 'ç‹¬ä¸€æ— äºŒ', 'é¦–å±ˆä¸€æŒ‡', 'ååˆ—å‰èŒ…', 'å‡ºäººå¤´åœ°', 'ç‹¬å é³Œå¤´',
                        'åŠ±ç²¾å›¾æ²»', 'å¥‹å‘å›¾å¼º', 'è‡ªå¼ºä¸æ¯', 'åšå¾·è½½ç‰©', 'ä¸Šå–„è‹¥æ°´', 'å¤§æ™ºè‹¥æ„š', 'å¤§å·§è‹¥æ‹™'
                    ],
                    university: [
                        // å¤§å­¦é˜¶æ®µæˆè¯­ - å­¦æœ¯ç ”ç©¶å’Œæ•°æ®åˆ†æç›¸å…³
                        'åšç§¯è–„å‘', 'åšé‡‡ä¼—é•¿', 'èä¼šè´¯é€š', 'ä¸¾ä¸€åä¸‰', 'è§¦ç±»æ—é€š', 'æ¸©æ•…çŸ¥æ–°', 'å­¦ä»¥è‡´ç”¨',
                        'ç²¾ç›Šæ±‚ç²¾', 'ä¸€ä¸ä¸è‹Ÿ', 'ä¸¥è°¨æ²»å­¦', 'å®äº‹æ±‚æ˜¯', 'è¿½æ ¹ç©¶åº•', 'åˆ¨æ ¹é—®åº•', 'å¯»æ ¹ç©¶åº•',
                        'å»ä¼ªå­˜çœŸ', 'å»ç²—å–ç²¾', 'åˆ†é—¨åˆ«ç±»', 'æ¡åˆ†ç¼•æ', 'çº²ä¸¾ç›®å¼ ', 'æçº²æŒˆé¢†', 'å»ç²—å–ç²¾',
                        'æŒ‰å›¾ç´¢éª¥', 'é¡ºè—¤æ‘¸ç“œ', 'è¿½æœ¬æº¯æº', 'è¿½æ ¹ç©¶åº•', 'ç©·æºç«Ÿå§”', 'è¿½æœ¬æº¯æº', 'å¯»æ ¹ç©¶åº•',
                        'èƒ¸æœ‰æˆç«¹', 'æˆç«¹åœ¨èƒ¸', 'å¿ƒä¸­æœ‰æ•°', 'äº†å¦‚æŒ‡æŒ', 'æ´è‹¥è§‚ç«', 'æ˜å¯Ÿç§‹æ¯«', 'è§å¾®çŸ¥è‘—',
                        'èä¼šè´¯é€š', 'ä¸¾ä¸€åä¸‰', 'é—»ä¸€çŸ¥å', 'è§¦ç±»æ—é€š', 'è±ç„¶å¼€æœ—', 'èŒ…å¡é¡¿å¼€', 'æç„¶å¤§æ‚Ÿ',
                        'å¾ªåºæ¸è¿›', 'æŒ‰éƒ¨å°±ç­', 'æœ‰æ¡ä¸ç´Š', 'äº•äº•æœ‰æ¡', 'å±‚æ¬¡åˆ†æ˜', 'è„‰ç»œæ¸…æ™°', 'æ¡ç†åˆ†æ˜',
                        'ç‹¬æ ‘ä¸€å¸œ', 'åˆ«å…·ä¸€æ ¼', 'ç‹¬è¾Ÿè¹Šå¾„', 'åˆ«å‡ºå¿ƒè£', 'ç‹¬å…·åŒ å¿ƒ', 'æ ‡æ–°ç«‹å¼‚', 'æ¨é™ˆå‡ºæ–°',
                        'å»ä¼ªå­˜çœŸ', 'æ˜è¾¨æ˜¯é', 'å»ç²—å–ç²¾', 'ç²¾ç›Šæ±‚ç²¾', 'ä¸€ä¸ä¸è‹Ÿ', 'ç²¾ç›Šæ±‚ç²¾', 'ç™¾å¯†ä¸€ç–',
                        'é›†æ€å¹¿ç›Š', 'ç¾¤ç­–ç¾¤åŠ›', 'åŒå¿ƒååŠ›', 'ä¼—å¿—æˆåŸ', 'å’Œè¡·å…±æµ', 'æºæ‰‹å¹¶è¿›', 'å–é•¿è¡¥çŸ­',
                        'é’å‡ºäºè“', 'åæ¥å±…ä¸Š', 'ç™¾å°ºç«¿å¤´', 'æ›´è¿›ä¸€æ­¥', 'è’¸è’¸æ—¥ä¸Š', 'æ¬£æ¬£å‘è£', 'å¦‚æ—¥ä¸­å¤©',
                        'åšç§¯è–„å‘', 'åšé‡‡ä¼—é•¿', 'èä¼šè´¯é€š', 'ä¸¾ä¸€åä¸‰', 'è§¦ç±»æ—é€š', 'æ¸©æ•…çŸ¥æ–°', 'å­¦ä»¥è‡´ç”¨'
                    ],
                    graduate: [
                        // ç ”ç©¶ç”Ÿé˜¶æ®µæˆè¯­ - é«˜çº§ç ”ç©¶æ€ç»´å’Œæ–¹æ³•è®º
                        'ç™»å³°é€ æ', 'ç‚‰ç«çº¯é’', 'å‡ºç¥å…¥åŒ–', 'å·§å¤ºå¤©å·¥', 'é¬¼æ–§ç¥å·¥', 'åˆ«å…·åŒ å¿ƒ', 'ç‹¬åˆ°è§è§£',
                        'èä¼šè´¯é€š', 'ä¸¾ä¸€åä¸‰', 'é—»ä¸€çŸ¥å', 'è§¦ç±»æ—é€š', 'è±ç„¶å¼€æœ—', 'èŒ…å¡é¡¿å¼€', 'æç„¶å¤§æ‚Ÿ',
                        'è¿½æ ¹ç©¶åº•', 'å¯»æ ¹é—®åº•', 'åˆ¨æ ¹é—®åº•', 'ç©·æºç«Ÿå§”', 'è¿½æœ¬æº¯æº', 'æ·±æŒ–æ ¹æº', 'æ¢ç©¶æœ¬è´¨',
                        'ç²¾ç›Šæ±‚ç²¾', 'ä¸€ä¸ä¸è‹Ÿ', 'ä¸¥è°¨æ²»å­¦', 'å®äº‹æ±‚æ˜¯', 'å®¢è§‚å…¬æ­£', 'æ±‚çœŸåŠ¡å®', 'è¿½æ±‚çœŸç†',
                        'ç‹¬æ ‘ä¸€å¸œ', 'è‡ªæˆä¸€å®¶', 'åˆ«å¼€ç”Ÿé¢', 'å¦è¾Ÿè¹Šå¾„', 'ç‹¬è¾Ÿè¹Šå¾„', 'ç‹¬å…·æ…§çœ¼', 'ç‹¬åˆ°è§è§£',
                        'é«˜ç»è¿œç©', 'æ·±è°‹è¿œè™‘', 'æ·±æ€ç†Ÿè™‘', 'è¿œè§å“è¯†', 'çœŸçŸ¥ç¼è§', 'æ´è‹¥è§‚ç«', 'æ˜å¯Ÿç§‹æ¯«',
                        'ç»§å¾€å¼€æ¥', 'æ‰¿å‰å¯å', 'ä¸æ—¶ä¿±è¿›', 'å¼€æ‹“åˆ›æ–°', 'é”æ„è¿›å–', 'å‹‡äºæ¢ç´¢', 'æ•¢äºåˆ›æ–°',
                        'å­¦ä»¥è‡´ç”¨', 'çŸ¥è¡Œåˆä¸€', 'ç†è®ºè”ç³»å®é™…', 'å®äº‹æ±‚æ˜¯', 'æ±‚çœŸåŠ¡å®', 'è„šè¸å®åœ°', 'åŸ‹å¤´è‹¦å¹²',
                        'åšç§¯è–„å‘', 'åšé‡‡ä¼—é•¿', 'å…¼æ”¶å¹¶è“„', 'å»ä¼ªå­˜çœŸ', 'å»ç²—å–ç²¾', 'èä¼šè´¯é€š', 'ä¸¾ä¸€åä¸‰',
                        'é”²è€Œä¸èˆ', 'æŒä¹‹ä»¥æ’', 'åšéŸ§ä¸æ‹”', 'ç™¾æŠ˜ä¸æŒ ', 'è‡ªå¼ºä¸æ¯', 'å¥‹å‘å›¾å¼º', 'åŠ±ç²¾å›¾æ²»',
                        'åšå¾·è½½ç‰©', 'ä¸Šå–„è‹¥æ°´', 'å¤§æ™ºè‹¥æ„š', 'å¤§å·§è‹¥æ‹™', 'è¿”ç’å½’çœŸ', 'æŠ±æœ´å®ˆæ‹™', 'å®ˆæ­£åˆ›æ–°',
                        'è¿ç­¹å¸·å¹„', 'å†³èƒœåƒé‡Œ', 'èƒ¸æœ‰æˆç«¹', 'æˆç«¹åœ¨èƒ¸', 'ç¨³æ“èƒœåˆ¸', 'åæ‹¿ä¹ç¨³', 'ä¸‡æ— ä¸€å¤±',
                        'åšå¤é€šä»Š', 'å­¦è´¯ä¸­è¥¿', 'åšå­¦å¤šé—»', 'è§å¤šè¯†å¹¿', 'é˜…å†ä¸°å¯Œ', 'ç»éªŒè€åˆ°', 'é©¾è½»å°±ç†Ÿ',
                        'ç²¾ç›Šæ±‚ç²¾', 'ä¸€ä¸ä¸è‹Ÿ', 'ä¸¥è°¨æ²»å­¦', 'å®äº‹æ±‚æ˜¯', 'å®¢è§‚å…¬æ­£', 'æ±‚çœŸåŠ¡å®', 'è¿½æ±‚çœŸç†',
                        'ç‹¬æ ‘ä¸€å¸œ', 'è‡ªæˆä¸€å®¶', 'åˆ«å¼€ç”Ÿé¢', 'å¦è¾Ÿè¹Šå¾„', 'ç‹¬è¾Ÿè¹Šå¾„', 'ç‹¬å…·æ…§çœ¼', 'ç‹¬åˆ°è§è§£'
                    ]
                };

                this.chineseWords = {
                    easy: [
                        // å°å­¦å››å¹´çº§è¯æ±‡
                        'ç¥–å›½', 'äººæ°‘', 'è‹±é›„', 'æ¨¡èŒƒ', 'æ¦œæ ·', 'ä¼ ç»Ÿ', 'æ–‡åŒ–', 'å†å²', 'æ•…äº‹', 'ä¼ è¯´',
                        'çŸ¥è¯†', 'ç§‘å­¦', 'æŠ€æœ¯', 'å‘æ˜', 'åˆ›é€ ', 'å‘ç°', 'æ¢ç´¢', 'ç ”ç©¶', 'å®éªŒ', 'è§‚å¯Ÿ',
                        'è‡ªç„¶', 'ç¯å¢ƒ', 'ä¿æŠ¤', 'æ±¡æŸ“', 'æ¸…æ´', 'ç»¿è‰²', 'ç¾ä¸½', 'å£®è§‚', 'å¥‡å¦™', 'ç¥ç§˜',
                        'å¥åº·', 'é”»ç‚¼', 'è¿åŠ¨', 'è¥å…»', 'å«ç”Ÿ', 'ç–¾ç—…', 'é¢„é˜²', 'æ²»ç–—', 'åº·å¤', 'ä¿å¥',
                        'äº¤é€š', 'å·¥å…·', 'è§„åˆ™', 'å®‰å…¨', 'æ–‡æ˜', 'ç¤¼è²Œ', 'ç§©åº', 'çºªå¾‹', 'è´£ä»»', 'ä¹‰åŠ¡',
                        'æ¤ç‰©', 'åŠ¨ç‰©', 'ç”Ÿé•¿', 'ç¹æ®–', 'è¿›åŒ–', 'ç”Ÿæ€', 'å¹³è¡¡', 'é£Ÿç‰©', 'é“¾', 'ç½‘ç»œ',
                        'å›¢ç»“', 'å‹è°Š', 'å’Œå¹³', 'è¿›æ­¥', 'å‘å±•', 'åˆ›æ–°', 'æœªæ¥', 'å¸Œæœ›', 'æ¢¦æƒ³', 'ç†æƒ³',
                        'æ˜¥å¤©', 'å¤å¤©', 'ç§‹å¤©', 'å†¬å¤©', 'æ—©æ™¨', 'ä¸­åˆ', 'æ™šä¸Š', 'ä»Šå¤©', 'æ˜å¤©', 'æ˜¨å¤©',
                        'ç¾ä¸½', 'æ¼‚äº®', 'å¯çˆ±', 'èªæ˜', 'å‹¤å¥‹', 'åŠªåŠ›', 'è®¤çœŸ', 'ä»”ç»†', 'å¹²å‡€', 'æ•´é½',
                        'é«˜å…´', 'å¿«ä¹', 'å¼€å¿ƒ', 'ç”Ÿæ°”', 'éš¾è¿‡', 'ä¼¤å¿ƒ', 'å®³æ€•', 'ç´§å¼ ', 'å…´å¥‹', 'æ¿€åŠ¨',
                        'å¸®åŠ©', 'å…³å¿ƒ', 'çˆ±æŠ¤', 'ä¿æŠ¤', 'å°Šé‡', 'æ„Ÿè°¢', 'é“æ­‰', 'åŸè°…', 'åˆ†äº«', 'åˆä½œ',
                        'å­¦æ ¡', 'å®¶åº­', 'ç¤¾åŒº', 'å…¬å›­', 'å•†åº—', 'åŒ»é™¢', 'é‚®å±€', 'é“¶è¡Œ', 'è½¦ç«™', 'æœºåœº',
                        'è¯­æ–‡', 'æ•°å­¦', 'è‹±è¯­', 'éŸ³ä¹', 'ç¾æœ¯', 'ä½“è‚²', 'ç§‘å­¦', 'ç”µè„‘', 'å“å¾·', 'å®‰å…¨',
                        'è¯»ä¹¦', 'å†™å­—', 'è®¡ç®—', 'ç”»ç”»', 'å”±æ­Œ', 'è·³èˆ', 'è·‘æ­¥', 'è·³é«˜', 'æ¸¸æ³³', 'æ‰“çƒ'
                    ],
                    medium: [
                        // å°å­¦äº”ã€å…­å¹´çº§è¯æ±‡
                        'ç¤¾ä¼š', 'å›½å®¶', 'æ°‘æ—', 'å›¢ç»“', 'ç»Ÿä¸€', 'ç‹¬ç«‹', 'è‡ªç”±', 'å¹³ç­‰', 'å…¬æ­£', 'æ³•æ²»',
                        'ç»æµ', 'å‘å±•', 'æ”¹é©', 'å¼€æ”¾', 'å»ºè®¾', 'ç°ä»£åŒ–', 'å·¥ä¸šåŒ–', 'ä¿¡æ¯åŒ–', 'åŸå¸‚åŒ–', 'å…¨çƒåŒ–',
                        'æ–‡åŒ–', 'æ•™è‚²', 'ç§‘æŠ€', 'å«ç”Ÿ', 'ä½“è‚²', 'è‰ºæœ¯', 'ä¼ åª’', 'æ—…æ¸¸', 'æœåŠ¡', 'ç®¡ç†',
                        'èµ„æº', 'èƒ½æº', 'ææ–™', 'å·¥ä¸š', 'å†œä¸š', 'å•†ä¸š', 'é‡‘è', 'è´¸æ˜“', 'æŠ•èµ„', 'æ¶ˆè´¹',
                        'æ”¿æ²»', 'æ°‘ä¸»', 'æ³•åˆ¶', 'æƒåŠ›', 'æƒåˆ©', 'ä¹‰åŠ¡', 'å…¬æ°‘', 'ç¤¾ä¼š', 'ç»„ç»‡', 'åˆ¶åº¦',
                        'æ€æƒ³', 'ç†è®º', 'è§‚ç‚¹', 'è®¤è¯†', 'å®è·µ', 'çœŸç†', 'è§„å¾‹', 'æœ¬è´¨', 'ç°è±¡', 'åŸå› ',
                        'å­¦ä¹ ', 'ç ”ç©¶', 'æ€è€ƒ', 'åˆ†æ', 'ç»¼åˆ', 'åˆ¤æ–­', 'æ¨ç†', 'è¯æ˜', 'åé©³', 'è®ºè¯',
                        'ç”Ÿæ´»', 'å·¥ä½œ', 'å­¦ä¹ ', 'å¨±ä¹', 'ä¼‘æ¯', 'å¥åº·', 'å¹¸ç¦', 'æˆåŠŸ', 'å¤±è´¥', 'å›°éš¾',
                        'å“å¾·', 'ä¿®å…»', 'é“å¾·', 'æƒ…æ“', 'ç†æƒ³', 'ä¿¡å¿µ', 'è¿½æ±‚', 'å¥‹æ–—', 'æ‹¼æ', 'è¿›å–',
                        'è´£ä»»', 'æ‹…å½“', 'ä½¿å‘½', 'å¥‰çŒ®', 'æœåŠ¡', 'è´¡çŒ®', 'ä»·å€¼', 'æ„ä¹‰', 'ç›®æ ‡', 'æ–¹å‘',
                        'åˆ›æ–°', 'åˆ›é€ ', 'å‘æ˜', 'å‘ç°', 'æ”¹è¿›', 'æé«˜', 'å®Œå–„', 'ä¼˜åŒ–', 'å‡çº§', 'æ›´æ–°',
                        'å’Œè°', 'å¹³è¡¡', 'åè°ƒ', 'æŒç»­', 'ç¨³å®š', 'æœ‰åº', 'è§„èŒƒ', 'æ ‡å‡†', 'è´¨é‡', 'æ•ˆç‡',
                        'ä¼ æ‰¿', 'å‘æ‰¬', 'å…‰å¤§', 'å¼˜æ‰¬', 'å€¡å¯¼', 'æ¨å¹¿', 'æ™®åŠ', 'å®£ä¼ ', 'æ•™è‚²', 'å¼•å¯¼',
                        'äº¤æµ', 'åˆä½œ', 'äº’åŠ©', 'å…±äº«', 'å…±èµ¢', 'äº’åˆ©', 'äº’è¡¥', 'äº’åŠ¨', 'ä¿ƒè¿›', 'æ¨åŠ¨',
                        'æŒ‘æˆ˜', 'æœºé‡', 'ç«äº‰', 'å‘å±•', 'è¿›æ­¥', 'ç¹è£', 'å¯Œå¼º', 'æ–‡æ˜', 'æ°‘ä¸»', 'å’Œè°'
                    ],
                    hard: [
                        // åˆä¸­ä¸€ã€äºŒå¹´çº§è¯æ±‡
                        'ç‰©ç†', 'åŒ–å­¦', 'ç”Ÿç‰©', 'åœ°ç†', 'å†å²', 'æ”¿æ²»', 'è¯­æ–‡', 'æ•°å­¦', 'è‹±è¯­', 'ä½“è‚²',
                        'åŠ›å­¦', 'çƒ­å­¦', 'ç”µå­¦', 'å…‰å­¦', 'å£°å­¦', 'åŸå­', 'åˆ†å­', 'å…ƒç´ ', 'åŒ–åˆç‰©', 'ååº”',
                        'ç»†èƒ', 'ç»„ç»‡', 'å™¨å®˜', 'ç³»ç»Ÿ', 'é—ä¼ ', 'å˜å¼‚', 'è¿›åŒ–', 'ç”Ÿæ€', 'ç¯å¢ƒ', 'ä¿æŠ¤',
                        'ä¸­å›½', 'ä¸–ç•Œ', 'äºšæ´²', 'æ¬§æ´²', 'éæ´²', 'ç¾æ´²', 'å¤§æ´‹æ´²', 'å—ææ´²', 'å¤ªå¹³æ´‹', 'å¤§è¥¿æ´‹',
                        'å¤ä»£', 'è¿‘ä»£', 'ç°ä»£', 'å½“ä»£', 'æœä»£', 'å¸ç‹', 'é©å‘½', 'æ”¹é©', 'å¼€æ”¾', 'å‘å±•',
                        'è¯—è¯', 'æ•£æ–‡', 'å°è¯´', 'æˆå‰§', 'æ–‡å­¦', 'è‰ºæœ¯', 'éŸ³ä¹', 'ç¾æœ¯', 'èˆè¹ˆ', 'æˆæ›²',
                        'ä»£æ•°', 'å‡ ä½•', 'å‡½æ•°', 'æ–¹ç¨‹', 'ä¸ç­‰å¼', 'ç»Ÿè®¡', 'æ¦‚ç‡', 'å›¾å½¢', 'å˜æ¢', 'è¯æ˜',
                        'æ°‘ä¸»', 'æ³•åˆ¶', 'æƒåˆ©', 'ä¹‰åŠ¡', 'å…¬æ°‘', 'å›½å®¶', 'æ”¿åºœ', 'å®ªæ³•', 'æ³•å¾‹', 'æ³•è§„',
                        'ç»æµ', 'å¸‚åœº', 'å•†å“', 'è´§å¸', 'ä»·æ ¼', 'ä»·å€¼', 'ä¾›æ±‚', 'ç«äº‰', 'å„æ–­', 'è°ƒæ§',
                        'æ–‡åŒ–', 'ä¼ ç»Ÿ', 'ä¹ ä¿—', 'èŠ‚æ—¥', 'ç¤¼ä»ª', 'é“å¾·', 'ä¿¡ä»°', 'å“²å­¦', 'æ€æƒ³', 'è§‚å¿µ',
                        'ç§‘å­¦', 'æŠ€æœ¯', 'å‘æ˜', 'åˆ›é€ ', 'åˆ›æ–°', 'å‘ç°', 'ç ”ç©¶', 'å®éªŒ', 'æ¢ç´¢', 'å®è·µ',
                        'æ•™è‚²', 'å­¦æ ¡', 'æ•™å¸ˆ', 'å­¦ç”Ÿ', 'è¯¾ç¨‹', 'æ•™æ', 'è€ƒè¯•', 'è¯„ä»·', 'å‡å­¦', 'å°±ä¸š'
                    ],
                    extreme: [
                        // åˆä¸­ä¸‰å¹´çº§åˆ°é«˜ä¸­è¯æ±‡
                        'é‡å­åŠ›å­¦', 'ç›¸å¯¹è®º', 'ç”µç£å­¦', 'çƒ­åŠ›å­¦', 'å…‰å­¦', 'åŸå­æ ¸', 'ç²’å­', 'æ³¢åŠ¨', 'åœºè®º', 'å¼¦ç†è®º',
                        'ç”Ÿç‰©åŒ–å­¦', 'åˆ†å­ç”Ÿç‰©å­¦', 'é—ä¼ å­¦', 'ç”Ÿæ€å­¦', 'è¿›åŒ–ç”Ÿç‰©å­¦', 'ç¥ç»ç§‘å­¦', 'å…ç–«å­¦', 'ç—…ç†å­¦', 'è¯ç†å­¦', 'ç”Ÿç†å­¦',
                        'é©¬å…‹æ€ä¸»ä¹‰', 'æ¯›æ³½ä¸œæ€æƒ³', 'é‚“å°å¹³ç†è®º', 'ä¸‰ä¸ªä»£è¡¨', 'ç§‘å­¦å‘å±•è§‚', 'ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³',
                        'è¾©è¯å”¯ç‰©ä¸»ä¹‰', 'å†å²å”¯ç‰©ä¸»ä¹‰', 'æ”¿æ²»ç»æµå­¦', 'ç§‘å­¦ç¤¾ä¼šä¸»ä¹‰', 'ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰', 'å…±äº§ä¸»ä¹‰',
                        'ç‰©è´¨æ–‡æ˜', 'æ”¿æ²»æ–‡æ˜', 'ç²¾ç¥æ–‡æ˜', 'ç¤¾ä¼šæ–‡æ˜', 'ç”Ÿæ€æ–‡æ˜', 'äº”ä½ä¸€ä½“', 'å››ä¸ªå…¨é¢', 'æ–°å‘å±•ç†å¿µ',
                        'å¸‚åœºç»æµ', 'è®¡åˆ’ç»æµ', 'æ··åˆç»æµ', 'çŸ¥è¯†ç»æµ', 'æ•°å­—ç»æµ', 'å¹³å°ç»æµ', 'å…±äº«ç»æµ', 'å¾ªç¯ç»æµ',
                        'å…¨çƒåŒ–', 'åŒºåŸŸåŒ–', 'å¤šæåŒ–', 'ä¿¡æ¯åŒ–', 'å·¥ä¸šåŒ–', 'åŸå¸‚åŒ–', 'ç°ä»£åŒ–', 'å›½é™…åŒ–', 'ä¸€ä½“åŒ–',
                        'äººå·¥æ™ºèƒ½', 'å¤§æ•°æ®', 'äº‘è®¡ç®—', 'ç‰©è”ç½‘', 'åŒºå—é“¾', '5Gé€šä¿¡', 'æ™ºèƒ½åˆ¶é€ ', 'æ–°èƒ½æº', 'æ–°ææ–™', 'ç”Ÿç‰©åŒ»è¯',
                        'æ–‡åŒ–è‡ªä¿¡', 'æ–‡åŒ–è‡ªè§‰', 'æ–‡åŒ–è‡ªå¼º', 'æ–‡åŒ–åˆ›æ–°', 'æ–‡åŒ–ä¼ æ‰¿', 'æ–‡åŒ–äº¤æµ', 'æ–‡æ˜äº’é‰´', 'æ–‡åŒ–è½¯å®åŠ›',
                        'æ•™è‚²ç°ä»£åŒ–', 'æ•™è‚²å…¬å¹³', 'ç´ è´¨æ•™è‚²', 'ç«‹å¾·æ ‘äºº', 'å…¨é¢å‘å±•', 'ç»ˆèº«å­¦ä¹ ', 'å­¦ä¹ å‹ç¤¾ä¼š', 'äººåŠ›èµ„æº',
                        'å¥åº·ä¸­å›½', 'å…¨æ°‘å¥èº«', 'å¥åº·ç”Ÿæ´»', 'å¿ƒç†å¥åº·', 'å…¬å…±å«ç”Ÿ', 'åŒ»ç–—ä¿éšœ', 'åŒ»ç–—æœåŠ¡', 'è¯å“å®‰å…¨',
                        'ç¾ä¸½ä¸­å›½', 'ç”Ÿæ€æ–‡æ˜', 'ç»¿è‰²å‘å±•', 'ä½ç¢³å‘å±•', 'å¾ªç¯å‘å±•', 'ç¯å¢ƒæ²»ç†', 'æ±¡æŸ“é˜²æ²»', 'ç”Ÿæ€ä¿æŠ¤',
                        'ä¸€å¸¦ä¸€è·¯', 'äººç±»å‘½è¿å…±åŒä½“', 'æ–°å‹å›½é™…å…³ç³»', 'å¤šè¾¹ä¸»ä¹‰', 'å…¨çƒæ²»ç†', 'å›½é™…åˆä½œ', 'å’Œå¹³å‘å±•',
                        'ç§‘æŠ€åˆ›æ–°', 'åˆ¶åº¦åˆ›æ–°', 'ç†è®ºåˆ›æ–°', 'å®è·µåˆ›æ–°', 'æ–‡åŒ–åˆ›æ–°', 'ç®¡ç†åˆ›æ–°', 'å…¨é¢åˆ›æ–°', 'ååŒåˆ›æ–°',
                        'é«˜è´¨é‡å‘å±•', 'ä¾›ç»™ä¾§ç»“æ„æ€§æ”¹é©', 'éœ€æ±‚ä¾§ç®¡ç†', 'åŒå¾ªç¯å‘å±•æ ¼å±€', 'æ–°å‘å±•æ ¼å±€', 'ç°ä»£åŒ–ç»æµä½“ç³»'
                    ],
                    university: [
                        // å¤§å­¦é˜¶æ®µè¯æ±‡ - ä»…ä½¿ç”¨æä¾›çš„ä¸­æ–‡è¯æ±‡
                        'ç»†èƒ', 'åŸºå› ', 'è›‹ç™½', 'RNA', 'DNA', 'è¡¨è¾¾', 'çªå˜', 'ç”Ÿå­˜', 'é£é™©', 'é¢„å',
                        'ç®±çº¿å›¾', 'æŸ±çŠ¶å›¾', 'æ•£ç‚¹å›¾', 'çƒ­å›¾', 'ç«å±±å›¾', 'æ°”æ³¡å›¾', 'é›·è¾¾å›¾', 'ç›¸å…³', 'èšç±»', 'åˆ†ç±»',
                        'å·®å¼‚', 'å¯Œé›†', 'é€šè·¯', 'ç½‘æ ¼', 'æ‹Ÿåˆ', 'è¯„åˆ†', 'æ’å', 'æ¯”è¾ƒ', 'éªŒè¯', 'é¢„æµ‹'
                    ],
                    graduate: [
                        // ç ”ç©¶ç”Ÿé˜¶æ®µè¯æ±‡ - ä»…ä½¿ç”¨æä¾›çš„ä¸­æ–‡è¯æ±‡
                        'ç”²åŸºåŒ–', 'è¡¨è§‚é—ä¼ ', 'è½¬å½•ç»„', 'è›‹ç™½è´¨ç»„', 'ä»£è°¢ç»„', 'å•ç»†èƒ', 'ç©ºé—´è½¬å½•', 'æŸ“è‰²è´¨å¯åŠæ€§',
                        'å…ç–«æ²»ç–—', 'è¯ç‰©æ•æ„Ÿæ€§', 'åŸºå› é›†å¯Œé›†', 'ä¸»æˆåˆ†åˆ†æ', 'tSNE', 'UMAP', 'WGCNA', 'ç”Ÿå­˜æ£®æ—', 'é€»è¾‘å›å½’',
                        'æ”¯æŒå‘é‡æœº', 'éšæœºæ£®æ—',
                        'è‚¿ç˜¤çªå˜è´Ÿè·', 'æ–°æŠ—åŸ', 'å…ç–«æµ¸æ¶¦', 'å¾®ç¯å¢ƒ', 'ç”Ÿç‰©æ ‡å¿—ç‰©', 'åˆ†å­äºšå‹', 'æ‹·è´æ•°å˜å¼‚', 'ä½“ç»†èƒçªå˜',
                        'é”™é…ä¿®å¤', 'å¾®å«æ˜Ÿä¸ç¨³å®š',
                        'å¼¹æ€§ç½‘ç»œ', 'LASSO', 'å²­å›å½’', 'äº¤å‰éªŒè¯', 'è´å¶æ–¯', 'é©¬å°”å¯å¤«', 'è’™ç‰¹å¡æ´›', 'Bootstrap',
                        'ç½®æ¢æ£€éªŒ', 'å¤šé‡æ¯”è¾ƒæ ¡æ­£', 'å‡å‘ç°ç‡'
                    ]
                };

                // æ¸¸æˆçŠ¶æ€
                this.currentLanguage = 'chinese';
                this.currentDifficulty = 'easy';
                this.currentWord = 'å‡†å¤‡å¼€å§‹';
                this.inputValue = '';
                this.wordDisplay = [];
                this.isPlaying = false;
                this.isPaused = false;
                this.gameOver = false;

                // ç»Ÿè®¡æ•°æ®
                this.timeLeft = 60;
                this.wpm = 0;
                this.accuracy = 100;
                this.score = 0;
                this.progress = 0;

                // å†…éƒ¨æ•°æ®
                this.startTime = null;
                this.typedChars = 0;
                this.correctChars = 0;
                this.totalWords = 0;
                this.timer = null;
                this.audioEnabled = true;
                this.usedWords = new Set(); // è·Ÿè¸ªå·²ä½¿ç”¨çš„è¯æ±‡

                this.initElements();
                this.bindEvents();
                this.initAudio();
            }

            initElements() {
                this.elements = {
                    chineseBtn: document.getElementById('chineseBtn'),
                    englishBtn: document.getElementById('englishBtn'),
                    customBtn: document.getElementById('customBtn'),
                    startBtn: document.getElementById('startBtn'),
                    pauseBtn: document.getElementById('pauseBtn'),
                    resetBtn: document.getElementById('resetBtn'),
                    audioBtn: document.getElementById('audioBtn'),
                    textInput: document.getElementById('textInput'),
                    currentWord: document.getElementById('currentWord'),
                    timer: document.getElementById('timer'),
                    wpm: document.getElementById('wpm'),
                    accuracy: document.getElementById('accuracy'),
                    score: document.getElementById('score'),
                    progressFill: document.getElementById('progressFill'),
                    gameOver: document.getElementById('gameOver'),
                    finalScore: document.getElementById('finalScore'),
                    finalWpm: document.getElementById('finalWpm'),
                    finalAccuracy: document.getElementById('finalAccuracy'),
                    totalWords: document.getElementById('totalWords'),
                    restartBtn: document.getElementById('restartBtn'),
                    shareBtn: document.getElementById('shareBtn'),
                    difficultyBtns: document.querySelectorAll('[data-level]'),
                    langBtns: document.querySelectorAll('[data-lang]'),

                    // è‡ªå®šä¹‰è¯æ±‡ç›¸å…³å…ƒç´ 
                    customVocabModal: document.getElementById('customVocabModal'),
                    closeCustomModal: document.getElementById('closeCustomModal'),
                    vocabTextarea: document.getElementById('vocabTextarea'),
                    vocabFile: document.getElementById('vocabFile'),
                    detectedDelimiter: document.getElementById('detectedDelimiter'),
                    vocabCount: document.getElementById('vocabCount'),
                    vocabPreview: document.getElementById('vocabPreview'),
                    shuffleVocab: document.getElementById('shuffleVocab'),
                    saveCustomVocab: document.getElementById('saveCustomVocab'),
                    clearCustomVocab: document.getElementById('clearCustomVocab'),
                    exportCustomVocab: document.getElementById('exportCustomVocab')
                };

                // åˆå§‹åŒ–è‡ªå®šä¹‰è¯æ±‡æ•°æ®
                this.customWords = [];
                this.detectedDelimiters = [];

                // åˆå§‹åŒ–æ˜¾ç¤º
                this.updateWordDisplay();
                this.updateCursor();
            }

            bindEvents() {
                // è¯­è¨€é€‰æ‹©
                this.elements.langBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => this.selectLanguage(e));
                });

                // éš¾åº¦é€‰æ‹©
                this.elements.difficultyBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => this.selectDifficulty(e));
                });

                // æ§åˆ¶æŒ‰é’®
                this.elements.startBtn.addEventListener('click', () => this.startGame());
                this.elements.pauseBtn.addEventListener('click', () => this.togglePause());
                this.elements.resetBtn.addEventListener('click', () => this.resetGame());
                this.elements.audioBtn.addEventListener('click', () => this.toggleAudio());

                // è¾“å…¥å¤„ç†
                this.elements.textInput.addEventListener('input', (e) => this.handleInput(e));
                this.elements.textInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && this.currentWord === this.elements.textInput.value) {
                        this.nextWord();
                    }
                });

                // æ¸¸æˆç»“æŸæŒ‰é’®
                this.elements.restartBtn.addEventListener('click', () => {
                    this.elements.gameOver.classList.remove('active');
                    this.startGame();
                });

                this.elements.shareBtn.addEventListener('click', () => this.shareResults());

                // è‡ªå®šä¹‰è¯æ±‡ç›¸å…³äº‹ä»¶
                this.elements.customBtn.addEventListener('click', () => this.openCustomVocabModal());
                this.elements.closeCustomModal.addEventListener('click', () => this.closeCustomVocabModal());
                this.elements.vocabTextarea.addEventListener('input', () => this.processVocabInput());
                this.elements.vocabFile.addEventListener('change', (e) => this.handleFileUpload(e));

                // Tabåˆ‡æ¢
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.switchTab(e));
                });

                // åˆ†éš”ç¬¦é€‰æ‹©
                document.querySelectorAll('input[name="delimiter"]').forEach(radio => {
                    radio.addEventListener('change', () => this.processVocabInput());
                });

                // è‡ªå®šä¹‰è¯æ±‡æ“ä½œæŒ‰é’®
                this.elements.shuffleVocab.addEventListener('click', () => this.shuffleCustomVocab());
                this.elements.saveCustomVocab.addEventListener('click', () => this.saveCustomVocab());
                this.elements.clearCustomVocab.addEventListener('click', () => this.clearCustomVocab());
                this.elements.exportCustomVocab.addEventListener('click', () => this.exportCustomVocab());

                // æ¨¡æ€æ¡†èƒŒæ™¯ç‚¹å‡»å…³é—­
                this.elements.customVocabModal.addEventListener('click', (e) => {
                    if (e.target === this.elements.customVocabModal) {
                        this.closeCustomVocabModal();
                    }
                });

                // é¡µé¢å¸è½½æ—¶æ¸…ç†
                window.addEventListener('beforeunload', () => {
                    if (this.timer) {
                        clearInterval(this.timer);
                    }
                });
            }

            initAudio() {
                // åˆ›å»ºéŸ³é¢‘ä¸Šä¸‹æ–‡
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (error) {
                    console.log('éŸ³é¢‘ä¸Šä¸‹æ–‡åˆå§‹åŒ–å¤±è´¥:', error);
                }

                // åŠ è½½è®¾ç½®
                const savedVolume = localStorage.getItem('audioVolume');
                if (savedVolume !== null) {
                    this.volume = parseFloat(savedVolume);
                } else {
                    this.volume = 0.7;
                }

                const savedEnabled = localStorage.getItem('audioEnabled');
                this.audioEnabled = savedEnabled !== 'false';
            }

            selectLanguage(e) {
                if (this.isPlaying) return;

                const lang = e.target.dataset.lang;
                this.currentLanguage = lang;

                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                this.elements.langBtns.forEach(btn => {
                    btn.classList.remove('active');
                });
                e.target.classList.add('active');

                // å¦‚æœé€‰æ‹©è‡ªå®šä¹‰è¯æ±‡ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è¯æ±‡
                if (lang === 'custom') {
                    if (!this.customWords || this.customWords.length === 0) {
                        this.showToast('è‡ªå®šä¹‰è¯æ±‡ä¸ºç©ºï¼Œè¯·å…ˆæ·»åŠ è¯æ±‡', 'warning');
                        // è‡ªåŠ¨æ‰“å¼€è‡ªå®šä¹‰è¯æ±‡æ¨¡æ€æ¡†
                        this.openCustomVocabModal();
                        // åˆ‡æ¢å›ä¸­æ–‡æ¨¡å¼
                        setTimeout(() => {
                            this.elements.chineseBtn.click();
                        }, 100);
                        return;
                    }
                }

                this.updateCursor();
                this.updateWordDisplay();  // æ›´æ–°æ˜¾ç¤ºçš„æç¤ºæ–‡æœ¬
            }

            selectDifficulty(e) {
                if (this.isPlaying) return;

                const level = e.target.dataset.level;
                this.currentDifficulty = level;

                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                this.elements.difficultyBtns.forEach(btn => {
                    btn.classList.remove('active');
                });
                e.target.classList.add('active');

                this.updateWordDisplay();  // æ›´æ–°æ˜¾ç¤ºï¼ˆè™½ç„¶æç¤ºæ–‡æœ¬ä¸å˜ï¼‰
            }

            startGame() {
                this.isPlaying = true;
                this.isPaused = false;
                this.gameOver = false;
                this.timeLeft = 60;
                this.score = 0;
                this.correctChars = 0;
                this.typedChars = 0;
                this.totalWords = 0;
                this.wpm = 0;
                this.accuracy = 100;
                this.progress = 0;
                this.startTime = Date.now();
                this.usedWords = new Set(); // é‡ç½®å·²ä½¿ç”¨è¯æ±‡é›†åˆ

                this.elements.startBtn.style.display = 'none';
                this.elements.pauseBtn.style.display = 'inline-block';
                this.elements.gameOver.classList.remove('active');
                this.elements.textInput.disabled = false;
                this.elements.textInput.value = '';
                this.elements.textInput.focus();

                this.nextWord();
                this.startTimer();
                this.playSound('gameStart');
            }

            togglePause() {
                if (this.isPaused) {
                    this.resumeGame();
                } else {
                    this.pauseGame();
                }
            }

            pauseGame() {
                this.isPaused = true;
                this.elements.pauseBtn.textContent = 'ç»§ç»­';
                clearInterval(this.timer);
                this.elements.textInput.disabled = true;
            }

            resumeGame() {
                this.isPaused = false;
                this.elements.pauseBtn.textContent = 'æš‚åœ';
                this.elements.textInput.disabled = false;
                this.elements.textInput.focus();
                this.startTimer();
            }

            resetGame() {
                this.isPlaying = false;
                this.isPaused = false;
                this.gameOver = false;

                if (this.timer) {
                    clearInterval(this.timer);
                }

                this.timeLeft = 60;
                this.score = 0;
                this.correctChars = 0;
                this.typedChars = 0;
                this.totalWords = 0;
                this.wpm = 0;
                this.accuracy = 100;
                this.progress = 0;

                this.elements.startBtn.style.display = 'inline-block';
                this.elements.pauseBtn.style.display = 'none';
                this.elements.gameOver.classList.remove('active');
                this.elements.textInput.disabled = true;
                this.elements.textInput.value = '';

                this.elements.currentWord.innerHTML = '<span class="cursor"></span>';
                this.updateStats();
                this.elements.progressFill.style.width = '0%';
            }

            nextWord() {
                let wordList = [];

                if (this.currentLanguage === 'chinese') {
                    wordList = this.chineseWords[this.currentDifficulty];
                } else if (this.currentLanguage === 'english') {
                    wordList = this.words[this.currentDifficulty];
                } else if (this.currentLanguage === 'idiom') {
                    wordList = this.idiomWords[this.currentDifficulty];
                } else if (this.currentLanguage === 'custom') {
                    wordList = this.customWords;
                }

                // æ£€æŸ¥è‡ªå®šä¹‰è¯æ±‡æ˜¯å¦ä¸ºç©º
                if (this.currentLanguage === 'custom' && (!wordList || wordList.length === 0)) {
                    this.showToast('è‡ªå®šä¹‰è¯æ±‡ä¸ºç©ºï¼Œè¯·å…ˆæ·»åŠ è¯æ±‡', 'warning');
                    // åˆ‡æ¢å›ä¸­æ–‡æ¨¡å¼
                    this.selectLanguage({ target: this.elements.chineseBtn });
                    return;
                }

                // ç­›é€‰å‡ºæœªä½¿ç”¨è¿‡çš„è¯æ±‡
                const availableWords = wordList.filter(word => !this.usedWords.has(word));

                let newWord;

                if (availableWords.length > 0) {
                    // è¿˜æœ‰æœªä½¿ç”¨çš„è¯æ±‡ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ª
                    const randomIndex = Math.floor(Math.random() * availableWords.length);
                    newWord = availableWords[randomIndex];
                    this.usedWords.add(newWord); // æ ‡è®°ä¸ºå·²ä½¿ç”¨
                } else {
                    // æ‰€æœ‰è¯æ±‡éƒ½å·²ä½¿ç”¨ï¼Œé‡ç½®ä½¿ç”¨è®°å½•æˆ–ç»“æŸæ¸¸æˆ
                    if (this.usedWords.size >= wordList.length) {
                        // é‡æ–°å¼€å§‹ä½¿ç”¨è¯æ±‡ï¼ˆå¯é€‰ï¼šæˆ–è€…ç›´æ¥ç»“æŸæ¸¸æˆï¼‰
                        this.usedWords.clear(); // æ¸…ç©ºå·²ä½¿ç”¨è®°å½•
                        const randomIndex = Math.floor(Math.random() * wordList.length);
                        newWord = wordList[randomIndex];
                        this.usedWords.add(newWord);
                    } else {
                        // å¤‡ç”¨æ–¹æ¡ˆï¼šéšæœºé€‰æ‹©ï¼ˆç†è®ºä¸Šä¸ä¼šåˆ°è¾¾è¿™é‡Œï¼‰
                        const randomIndex = Math.floor(Math.random() * wordList.length);
                        newWord = wordList[randomIndex];
                    }
                }

                this.currentWord = newWord;
                this.elements.textInput.value = '';
                this.totalWords++;
                this.updateWordDisplay();
                this.updateProgress();
            }

            updateWordDisplay() {
                const currentWord = this.currentWord;
                const inputValue = this.elements.textInput.value;
                const wordDisplay = [];

                // å¦‚æœæ¸¸æˆæœªå¼€å§‹ï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯
                if (!this.isPlaying && !this.gameOver) {
                    let hintText;
                    switch (this.currentLanguage) {
                        case 'chinese':
                            hintText = 'ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"å¼€å§‹ç»ƒä¹ ';
                            break;
                        case 'english':
                            hintText = 'Click "Start Game" to begin';
                            break;
                        case 'idiom':
                            hintText = 'ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"å¼€å§‹æˆè¯­ç»ƒä¹ ';
                            break;
                        case 'custom':
                            hintText = `è‡ªå®šä¹‰è¯æ±‡æ¨¡å¼ (${this.customWords.length} ä¸ªè¯æ±‡)`;
                            break;
                        default:
                            hintText = 'ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"å¼€å§‹ç»ƒä¹ ';
                    }
                    this.elements.currentWord.innerHTML = `<span style="opacity: 0.6;">${hintText}</span><span class="cursor"></span>`;
                    return;
                }

                const isChinese = this.currentLanguage === 'chinese' || this.currentLanguage === 'idiom' || this.currentLanguage === 'custom';

                if (isChinese) {
                    const inputChars = Array.from(inputValue);
                    const targetChars = Array.from(currentWord);

                    for (let i = 0; i < targetChars.length; i++) {
                        if (i < inputChars.length) {
                            if (inputChars[i] === targetChars[i]) {
                                wordDisplay.push({
                                    char: targetChars[i],
                                    class: 'correct'
                                });
                            } else {
                                wordDisplay.push({
                                    char: targetChars[i],
                                    class: 'incorrect'
                                });
                            }
                        } else {
                            wordDisplay.push({
                                char: targetChars[i],
                                class: 'remaining'
                            });
                        }
                    }
                } else {
                    for (let i = 0; i < currentWord.length; i++) {
                        if (i < inputValue.length) {
                            if (inputValue[i].toLowerCase() === currentWord[i].toLowerCase()) {
                                wordDisplay.push({
                                    char: currentWord[i],
                                    class: 'correct'
                                });
                            } else {
                                wordDisplay.push({
                                    char: currentWord[i],
                                    class: 'incorrect'
                                });
                            }
                        } else {
                            wordDisplay.push({
                                char: currentWord[i],
                                class: 'remaining'
                            });
                        }
                    }
                }

                wordDisplay.push('<span class="cursor"></span>');

                // å°†å¯¹è±¡æ•°ç»„è½¬æ¢ä¸ºHTMLå­—ç¬¦ä¸²
                const htmlContent = wordDisplay.map(item => {
                    if (typeof item === 'string') {
                        return item; // å·²ç»æ˜¯HTMLå­—ç¬¦ä¸²ï¼ˆå¦‚cursorï¼‰
                    }
                    return `<span class="char ${item.class}">${item.char}</span>`;
                }).join('');

                this.elements.currentWord.innerHTML = htmlContent;
            }

            updateCursor() {
                if (!this.isPlaying) {
                    this.elements.currentWord.innerHTML = '<span class="cursor"></span>';
                }
            }

            handleInput(e) {
                if (!this.isPlaying || this.isPaused) return;

                const inputValue = e.target.value;

                // é‡æ–°è®¡ç®—æ­£ç¡®å­—ç¬¦æ•°
                this.calculateCorrectChars(inputValue);

                // æ›´æ–°æ€»è¾“å…¥å­—ç¬¦æ•°
                if (this.currentLanguage === 'chinese') {
                    this.typedChars = Array.from(inputValue).length;
                } else {
                    this.typedChars = inputValue.length;
                }

                // æ£€æŸ¥æ˜¯å¦å®Œå…¨æ­£ç¡®
                const isCorrect = this.currentLanguage === 'chinese' ?
                    Array.from(inputValue).every((char, i) => char === this.currentWord[i]) :
                    inputValue.split('').every((char, i) => char.toLowerCase() === this.currentWord[i].toLowerCase());

                if (isCorrect && inputValue === this.currentWord) {
                    this.correctWord();
                }

                this.updateWordDisplay();
                this.updateStats();
            }

            // è®¡ç®—å½“å‰è¾“å…¥çš„æ­£ç¡®å­—ç¬¦æ•°
            calculateCorrectChars(inputValue) {
                let correctCount = 0;

                if (this.currentLanguage === 'chinese' || this.currentLanguage === 'idiom' || this.currentLanguage === 'custom') {
                    const inputChars = Array.from(inputValue);
                    const targetChars = Array.from(this.currentWord);

                    for (let i = 0; i < Math.min(inputChars.length, targetChars.length); i++) {
                        if (inputChars[i] === targetChars[i]) {
                            correctCount++;
                        }
                    }
                } else {
                    for (let i = 0; i < Math.min(inputValue.length, this.currentWord.length); i++) {
                        if (inputValue[i].toLowerCase() === this.currentWord[i].toLowerCase()) {
                            correctCount++;
                        }
                    }
                }

                return correctCount;
            }

            correctWord() {
                const correctChars = this.correctChars + this.currentWord.length;
                const difficultyMultiplier = this.getDifficultyMultiplier();
                const score = this.score + (this.currentWord.length * difficultyMultiplier);

                this.score = score;
                this.correctChars = correctChars;

                this.elements.textInput.classList.add('correct');
                setTimeout(() => {
                    this.elements.textInput.classList.remove('correct');
                    this.nextWord();
                }, 300);

                this.playSound('correct');
            }

            getDifficultyMultiplier() {
                const multipliers = {
                    easy: 1,
                    medium: 2,
                    hard: 3,
                    extreme: 5
                };
                return multipliers[this.currentDifficulty];
            }

            startTimer() {
                if (this.timer) {
                    clearInterval(this.timer);
                }

                let lastCountdownSecond = 60;

                this.timer = setInterval(() => {
                    if (!this.isPaused) {
                        const timeLeft = this.timeLeft - 1;
                        this.timeLeft = timeLeft;
                        this.elements.timer.textContent = timeLeft;

                        // å€’è®¡æ—¶å£°éŸ³
                        if (timeLeft <= 10 && timeLeft !== lastCountdownSecond) {
                            this.playCountdownSound(timeLeft);
                            lastCountdownSecond = timeLeft;
                        }

                        if (timeLeft <= 0) {
                            this.endGame();
                        }
                    }
                }, 1000);
            }

            updateStats() {
                // è®¡ç®—WPM
                if (this.startTime && this.typedChars > 0) {
                    const timeElapsed = (Date.now() - this.startTime) / 1000 / 60;
                    let wordsTyped;

                    if (this.currentLanguage === 'chinese' || this.currentLanguage === 'idiom' || this.currentLanguage === 'custom') {
                        // ä¸­æ–‡ã€æˆè¯­å’Œè‡ªå®šä¹‰è¯æ±‡ï¼šæ¯ä¸ªå­—ç®—ä¸€ä¸ªè¯
                        wordsTyped = this.correctChars;
                    } else {
                        // è‹±æ–‡ï¼š5ä¸ªå­—ç¬¦ç®—ä¸€ä¸ªè¯
                        wordsTyped = this.correctChars / 5;
                    }

                    this.wpm = Math.round(wordsTyped / timeElapsed) || 0;
                    this.elements.wpm.textContent = this.wpm;
                }

                // è®¡ç®—å‡†ç¡®ç‡ - ä½¿ç”¨å½“å‰è¾“å…¥çš„å®æ—¶è®¡ç®—
                if (this.typedChars > 0) {
                    const currentCorrectChars = this.calculateCorrectChars(this.elements.textInput.value);
                    const accuracy = Math.round((currentCorrectChars / this.typedChars) * 100);
                    this.accuracy = Math.max(0, Math.min(100, accuracy)); // ç¡®ä¿åœ¨0-100ä¹‹é—´
                    this.elements.accuracy.textContent = this.accuracy + '%';
                } else {
                    this.accuracy = 100;
                    this.elements.accuracy.textContent = '100%';
                }

                // æ›´æ–°æ˜¾ç¤º
                this.elements.score.textContent = this.score;
            }

            updateProgress() {
                const progress = Math.min((this.totalWords / 20) * 100, 100);
                this.elements.progressFill.style.width = progress + '%';
            }

            endGame() {
                if (this.timer) {
                    clearInterval(this.timer);
                }

                const timeElapsed = (Date.now() - this.startTime) / 1000 / 60;

                // è®¡ç®—æœ€ç»ˆWPM
                let wordsTyped;
                if (this.currentLanguage === 'chinese' || this.currentLanguage === 'idiom' || this.currentLanguage === 'custom') {
                    // ä¸­æ–‡ã€æˆè¯­å’Œè‡ªå®šä¹‰è¯æ±‡ï¼šæ¯ä¸ªå­—ç®—ä¸€ä¸ªè¯
                    wordsTyped = this.correctChars;
                } else {
                    // è‹±æ–‡ï¼š5ä¸ªå­—ç¬¦ç®—ä¸€ä¸ªè¯
                    wordsTyped = this.correctChars / 5;
                }

                const finalWpm = Math.round(wordsTyped / timeElapsed) || 0;
                const finalAccuracy = this.typedChars > 0 ?
                    Math.round((this.correctChars / this.typedChars) * 100) : 0;

                this.gameOver = true;
                this.isPlaying = false;

                this.finalWpm = finalWpm;
                this.finalAccuracy = finalAccuracy;
                this.finalScore = this.score;

                this.elements.finalScore.textContent = this.finalScore;
                this.elements.finalWpm.textContent = this.finalWpm;
                this.elements.finalAccuracy.textContent = this.finalAccuracy + '%';
                this.totalWords = this.totalWords - 1;
                this.elements.totalWords.textContent = this.totalWords;

                this.elements.textInput.disabled = true;
                this.elements.startBtn.style.display = 'inline-block';
                this.elements.pauseBtn.style.display = 'none';

                this.playSound('gameEnd');
                this.checkAndPlayNewRecord();

                this.saveBestScore(this.score);

                // æ˜¾ç¤ºæ¸¸æˆç»“æŸç•Œé¢
                this.elements.gameOver.classList.add('active');
            }

            checkAndPlayNewRecord() {
                const bestScore = this.getBestScore();
                if (this.score > bestScore) {
                    setTimeout(() => {
                        this.playSound('newRecord');
                        this.showToast('ğŸ‰ æ–°çºªå½•ï¼', 'success');
                    }, 500);
                }
            }

            saveBestScore(score) {
                try {
                    const bestScore = localStorage.getItem('bestScore') || 0;
                    if (score > bestScore) {
                        localStorage.setItem('bestScore', score);
                        this.showToast('æ–°çºªå½•ï¼', 'success');
                    }
                } catch (e) {
                    console.error('ä¿å­˜åˆ†æ•°å¤±è´¥', e);
                }
            }

            getBestScore() {
                try {
                    return parseInt(localStorage.getItem('bestScore') || '0');
                } catch (e) {
                    return 0;
                }
            }

            playSound(type) {
                if (!this.audioEnabled) return;

                try {
                    // ä½¿ç”¨ç®€å•çš„éŸ³è°ƒ
                    if (this.audioContext) {
                        const oscillator = this.audioContext.createOscillator();
                        const gainNode = this.audioContext.createGain();

                        oscillator.connect(gainNode);
                        gainNode.connect(this.audioContext.destination);

                        const frequencies = {
                            correct: 800,
                            wrong: 300,
                            gameStart: 600,
                            gameEnd: 500,
                            countdown: 1000,
                            newRecord: 1200
                        };

                        const frequency = frequencies[type] || 800;
                        const duration = type === 'newRecord' ? 300 : 150;

                        oscillator.frequency.value = frequency;
                        oscillator.type = 'sine';

                        gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);
                        gainNode.gain.linearRampToValueAtTime(this.volume * 0.3, this.audioContext.currentTime + 0.01);
                        gainNode.gain.linearRampToValueAtTime(0, this.audioContext.currentTime + duration / 1000);

                        oscillator.start(this.audioContext.currentTime);
                        oscillator.stop(this.audioContext.currentTime + duration / 1000);
                    }
                } catch (error) {
                    console.log('éŸ³æ•ˆæ’­æ”¾å¤±è´¥:', error);
                }
            }

            playCountdownSound(seconds) {
                if (seconds <= 10 && seconds > 0) {
                    const frequency = 1000 - (seconds * 50);
                    this.playTone(frequency, 100);
                }
            }

            playTone(frequency, duration) {
                try {
                    if (this.audioContext) {
                        const oscillator = this.audioContext.createOscillator();
                        const gainNode = this.audioContext.createGain();

                        oscillator.connect(gainNode);
                        gainNode.connect(this.audioContext.destination);

                        oscillator.frequency.value = frequency;
                        oscillator.type = 'sine';

                        gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);
                        gainNode.gain.linearRampToValueAtTime(this.volume * 0.3, this.audioContext.currentTime + 0.01);
                        gainNode.gain.linearRampToValueAtTime(0, this.audioContext.currentTime + duration / 1000);

                        oscillator.start(this.audioContext.currentTime);
                        oscillator.stop(this.audioContext.currentTime + duration / 1000);
                    }
                } catch (error) {
                    console.log('éŸ³è°ƒæ’­æ”¾å¤±è´¥:', error);
                }
            }

            showToast(message, type = 'success') {
                // åˆ›å»ºè‡ªå®šä¹‰æç¤º
                const toast = document.createElement('div');
                toast.textContent = message;
                toast.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background-color: ${type === 'success' ? 'rgba(0, 255, 0, 0.9)' : 'rgba(255, 0, 0, 0.9)'};
                    color: white;
                    padding: 12px 24px;
                    border-radius: 5px;
                    font-family: inherit;
                    font-size: 16px;
                    font-weight: bold;
                    z-index: 10000;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                    transition: all 0.3s ease;
                    pointer-events: none;
                    animation: fadeIn 0.3s ease, fadeOut 0.3s ease 2s forwards;
                `;

                document.body.appendChild(toast);

                setTimeout(() => {
                    toast.remove();
                }, 2500);
            }

            toggleAudio() {
                this.audioEnabled = !this.audioEnabled;
                this.elements.audioBtn.textContent = this.audioEnabled ? 'ğŸ”Š' : 'ğŸ”‡';

                try {
                    localStorage.setItem('audioEnabled', this.audioEnabled);
                    this.showToast(this.audioEnabled ? 'éŸ³é¢‘å·²å¼€å¯' : 'éŸ³é¢‘å·²å…³é—­', 'success');
                } catch (e) {
                    console.error('ä¿å­˜éŸ³é¢‘è®¾ç½®å¤±è´¥:', e);
                }

                // æ¢å¤éŸ³é¢‘ä¸Šä¸‹æ–‡ï¼ˆå¦‚æœéœ€è¦ï¼‰
                if (!this.audioEnabled && this.audioContext) {
                    try {
                        if (this.audioContext.state === 'suspended') {
                            this.audioContext.resume();
                        }
                    } catch (error) {
                        console.log('éŸ³é¢‘ä¸Šä¸‹æ–‡æ¢å¤å¤±è´¥:', error);
                    }
                }
            }

            shareResults() {
                const shareText = `æˆ‘åœ¨ç»¿è‰²ç»ˆç«¯æ‰“å­—æ¸¸æˆä¸­è·å¾—äº† ${this.finalScore} åˆ†ï¼WPM: ${this.finalWpm}ï¼Œå‡†ç¡®ç‡: ${this.finalAccuracy}%`;

                if (navigator.share) {
                    navigator.share({
                        title: 'ç»¿è‰²ç»ˆç«¯æ‰“å­—æ¸¸æˆ',
                        text: shareText,
                        url: window.location.href
                    }).catch(err => {
                        console.log('åˆ†äº«å¤±è´¥:', err);
                        // é™çº§åˆ°å¤åˆ¶é“¾æ¥
                        this.copyToClipboard(shareText + '\n' + window.location.href);
                    });
                } else {
                    // é™çº§åˆ°å¤åˆ¶é“¾æ¥
                    this.copyToClipboard(shareText + '\n' + window.location.href);
                }
            }

            copyToClipboard(text) {
                try {
                    navigator.clipboard.writeText(text).then(() => {
                        this.showToast('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼', 'success');
                    }).catch(err => {
                        console.error('å¤åˆ¶å¤±è´¥:', err);
                    });
                } catch (err) {
                    // é™çº§åˆ°ä¼ ç»Ÿæ–¹æ³•
                    const textarea = document.createElement('textarea');
                    textarea.value = text;
                    textarea.style.position = 'fixed';
                    textarea.style.opacity = '0';
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    this.showToast('é“¾æ¥å·²å¤åˆ¶ï¼', 'success');
                }
            }

            // ==================== è‡ªå®šä¹‰è¯æ±‡åŠŸèƒ½ ====================

            // æ‰“å¼€è‡ªå®šä¹‰è¯æ±‡æ¨¡æ€æ¡†
            openCustomVocabModal() {
                this.elements.customVocabModal.classList.add('active');
                this.loadCustomVocabFromStorage();
                this.processVocabInput();
            }

            // å…³é—­è‡ªå®šä¹‰è¯æ±‡æ¨¡æ€æ¡†
            closeCustomVocabModal() {
                this.elements.customVocabModal.classList.remove('active');
            }

            // åˆ‡æ¢Tab
            switchTab(e) {
                const targetTab = e.target.dataset.tab;

                // åˆ‡æ¢æŒ‰é’®çŠ¶æ€
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                e.target.classList.add('active');

                // åˆ‡æ¢å†…å®¹æ˜¾ç¤º
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(targetTab + 'Tab').classList.add('active');
            }

            // æ™ºèƒ½åˆ†éš”ç¬¦æ£€æµ‹ç®—æ³•
            detectDelimiter(text) {
                if (!text || text.trim().length === 0) {
                    return { delimiter: '\n', confidence: 0 };
                }

                const delimiters = [',', ' ', '\n', 'ã€', ';', '\t', '|', 'ï¼Œ', 'ï¼›'];
                const delimiterCounts = {};
                let maxCount = 0;
                let bestDelimiter = '\n';

                // ç»Ÿè®¡æ¯ä¸ªåˆ†éš”ç¬¦çš„å‡ºç°æ¬¡æ•°
                delimiters.forEach(delim => {
                    const count = (text.match(new RegExp('\\' + delim.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g')) || []).length;
                    delimiterCounts[delim] = count;

                    if (count > maxCount) {
                        maxCount = count;
                        bestDelimiter = delim;
                    }
                });

                // è®¡ç®—ç½®ä¿¡åº¦
                const totalDelimiters = Object.values(delimiterCounts).reduce((sum, count) => sum + count, 0);
                const confidence = totalDelimiters > 0 ? maxCount / totalDelimiters : 0;

                return { delimiter: bestDelimiter, confidence: confidence };
            }

            // å¤„ç†è¯æ±‡è¾“å…¥
            processVocabInput() {
                const text = this.elements.vocabTextarea.value.trim();

                if (!text) {
                    this.customWords = [];
                    this.updateVocabPreview();
                    this.elements.detectedDelimiter.textContent = 'æ— å†…å®¹';
                    return;
                }

                // è·å–é€‰ä¸­çš„åˆ†éš”ç¬¦
                const selectedDelimiter = document.querySelector('input[name="delimiter"]:checked').value;
                let delimiter;

                if (selectedDelimiter === 'auto') {
                    // è‡ªåŠ¨æ£€æµ‹
                    const detection = this.detectDelimiter(text);
                    delimiter = detection.delimiter;
                    this.elements.detectedDelimiter.textContent = `${delimiter} (ç½®ä¿¡åº¦: ${Math.round(detection.confidence * 100)}%)`;
                } else {
                    // æ‰‹åŠ¨é€‰æ‹©
                    delimiter = selectedDelimiter === '\\n' ? '\n' : selectedDelimiter;
                    this.elements.detectedDelimiter.textContent = `${delimiter} (æ‰‹åŠ¨é€‰æ‹©)`;
                }

                // åˆ†å‰²è¯æ±‡
                let words = text.split(delimiter)
                    .map(word => word.trim())
                    .filter(word => word.length > 0);

                // å¦‚æœåˆ†å‰²ç»“æœä¸ç†æƒ³ï¼Œå°è¯•å…¶ä»–åˆ†éš”ç¬¦
                if (words.length <= 1 && text.length > 10) {
                    // å°è¯•å¤šç§åˆ†éš”ç¬¦ç»„åˆ
                    const alternativeDelimiters = [/[,\sï¼Œã€;ï¼›|]+/, /\s+/, /[,\sï¼Œã€ï¼›;|]+/];

                    for (const altDelim of alternativeDelimiters) {
                        const altWords = text.split(altDelim)
                            .map(word => word.trim())
                            .filter(word => word.length > 0);

                        if (altWords.length > words.length) {
                            words = altWords;
                            delimiter = altDelim.source || 'å¤åˆåˆ†éš”ç¬¦';
                            this.elements.detectedDelimiter.textContent = `${delimiter} (æ™ºèƒ½åŒ¹é…)`;
                            break;
                        }
                    }
                }

                // å»é‡å¹¶ä¿æŒé¡ºåº
                const uniqueWords = [];
                const seenWords = new Set();

                words.forEach(word => {
                    const normalizedWord = word.toLowerCase().trim();
                    if (!seenWords.has(normalizedWord) && normalizedWord.length > 0) {
                        seenWords.add(normalizedWord);
                        uniqueWords.push(word);
                    }
                });

                this.customWords = uniqueWords;
                this.updateVocabPreview();
            }

            // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
            handleFileUpload(e) {
                const file = e.target.files[0];

                if (!file) return;

                // æ£€æŸ¥æ–‡ä»¶ç±»å‹
                const allowedTypes = ['text/plain', 'text/csv', 'text/markdown', 'application/octet-stream'];
                const allowedExtensions = ['.txt', '.csv', '.md'];

                const isValidType = allowedTypes.includes(file.type) ||
                                  allowedExtensions.some(ext => file.name.toLowerCase().endsWith(ext));

                if (!isValidType) {
                    this.showToast('è¯·é€‰æ‹©æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ (.txt, .csv, .md)', 'error');
                    e.target.value = ''; // æ¸…ç©ºæ–‡ä»¶é€‰æ‹©
                    return;
                }

                // æ£€æŸ¥æ–‡ä»¶å¤§å° (æœ€å¤§5MB)
                if (file.size > 5 * 1024 * 1024) {
                    this.showToast('æ–‡ä»¶è¿‡å¤§ï¼Œè¯·é€‰æ‹©å°äº5MBçš„æ–‡ä»¶', 'error');
                    e.target.value = '';
                    return;
                }

                const reader = new FileReader();

                reader.onload = (event) => {
                    try {
                        const content = event.target.result;
                        this.elements.vocabTextarea.value = content;
                        this.processVocabInput();
                        this.showToast('æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼', 'success');

                        // åˆ‡æ¢åˆ°ç²˜è´´Tabä»¥æ˜¾ç¤ºå†…å®¹
                        document.querySelector('[data-tab="paste"]').click();
                    } catch (error) {
                        console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);
                        this.showToast('æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
                    }
                };

                reader.onerror = () => {
                    this.showToast('æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
                };

                reader.readAsText(file, 'UTF-8');
            }

            // æ›´æ–°è¯æ±‡é¢„è§ˆ
            updateVocabPreview() {
                const count = this.customWords.length;
                this.elements.vocabCount.textContent = count;

                if (count === 0) {
                    this.elements.vocabPreview.innerHTML = '<div style="opacity: 0.6; text-align: center; padding: 20px;">æš‚æ— è¯æ±‡ï¼Œè¯·è¾“å…¥æˆ–ä¸Šä¼ æ–‡ä»¶</div>';
                    return;
                }

                // é™åˆ¶é¢„è§ˆæ˜¾ç¤ºæ•°é‡
                const previewWords = this.customWords.slice(0, 100);
                const moreCount = Math.max(0, count - 100);

                const html = previewWords.map((word, index) => `
                    <div class="vocab-item">
                        ${word}
                        <span class="remove-item" onclick="game.removeCustomWord(${index})">Ã—</span>
                    </div>
                `).join('');

                if (moreCount > 0) {
                    this.elements.vocabPreview.innerHTML = html + `<div style="width: 100%; text-align: center; opacity: 0.6; padding: 10px;">...è¿˜æœ‰ ${moreCount} ä¸ªè¯æ±‡</div>`;
                } else {
                    this.elements.vocabPreview.innerHTML = html;
                }
            }

            // ç§»é™¤å•ä¸ªè¯æ±‡
            removeCustomWord(index) {
                this.customWords.splice(index, 1);
                this.updateVocabTextarea();
                this.updateVocabPreview();
            }

            // æ›´æ–°æ–‡æœ¬åŸŸå†…å®¹
            updateVocabTextarea() {
                const delimiter = this.detectDelimiter(this.elements.vocabTextarea.value).delimiter || '\n';
                this.elements.vocabTextarea.value = this.customWords.join(delimiter === '\n' ? '\n' : delimiter + ' ');
            }

            // éšæœºæ’åºè¯æ±‡
            shuffleCustomVocab() {
                if (this.customWords.length === 0) {
                    this.showToast('æ²¡æœ‰å¯æ’åºçš„è¯æ±‡', 'warning');
                    return;
                }

                // Fisher-Yates æ´—ç‰Œç®—æ³•
                const shuffled = [...this.customWords];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }

                this.customWords = shuffled;
                this.updateVocabTextarea();
                this.updateVocabPreview();
                this.showToast('è¯æ±‡å·²éšæœºæ’åº', 'success');
            }

            // ä¿å­˜è‡ªå®šä¹‰è¯æ±‡åˆ°æœ¬åœ°å­˜å‚¨
            saveCustomVocab() {
                if (this.customWords.length === 0) {
                    this.showToast('æ²¡æœ‰å¯ä¿å­˜çš„è¯æ±‡', 'warning');
                    return;
                }

                try {
                    const vocabData = {
                        words: this.customWords,
                        createdAt: new Date().toISOString(),
                        version: '1.0'
                    };

                    localStorage.setItem('customVocabulary', JSON.stringify(vocabData));
                    this.showToast(`æˆåŠŸä¿å­˜ ${this.customWords.length} ä¸ªè¯æ±‡ï¼`, 'success');
                } catch (error) {
                    console.error('ä¿å­˜å¤±è´¥:', error);
                    this.showToast('ä¿å­˜å¤±è´¥ï¼Œå¯èƒ½æ˜¯å­˜å‚¨ç©ºé—´ä¸è¶³', 'error');
                }
            }

            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è‡ªå®šä¹‰è¯æ±‡
            loadCustomVocabFromStorage() {
                try {
                    const saved = localStorage.getItem('customVocabulary');
                    if (saved) {
                        const vocabData = JSON.parse(saved);
                        if (vocabData.words && Array.isArray(vocabData.words)) {
                            this.customWords = vocabData.words;
                            this.updateVocabTextarea();
                            this.updateVocabPreview();
                        }
                    }
                } catch (error) {
                    console.error('åŠ è½½è‡ªå®šä¹‰è¯æ±‡å¤±è´¥:', error);
                }
            }

            // æ¸…ç©ºè‡ªå®šä¹‰è¯æ±‡
            clearCustomVocab() {
                if (this.customWords.length === 0) {
                    this.showToast('æ²¡æœ‰å¯æ¸…ç©ºçš„è¯æ±‡', 'warning');
                    return;
                }

                if (confirm(`ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰ ${this.customWords.length} ä¸ªè¯æ±‡å—ï¼Ÿ`)) {
                    this.customWords = [];
                    this.elements.vocabTextarea.value = '';
                    this.updateVocabPreview();
                    this.elements.detectedDelimiter.textContent = 'æ— å†…å®¹';

                    // åŒæ—¶æ¸…é™¤æœ¬åœ°å­˜å‚¨
                    localStorage.removeItem('customVocabulary');
                    this.showToast('è¯æ±‡å·²æ¸…ç©º', 'success');
                }
            }

            // å¯¼å‡ºè‡ªå®šä¹‰è¯æ±‡
            exportCustomVocab() {
                if (this.customWords.length === 0) {
                    this.showToast('æ²¡æœ‰å¯å¯¼å‡ºçš„è¯æ±‡', 'warning');
                    return;
                }

                try {
                    const content = this.customWords.join('\n');
                    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
                    const url = URL.createObjectURL(blob);

                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `è‡ªå®šä¹‰è¯æ±‡è¡¨_${new Date().toISOString().slice(0, 10)}.txt`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);

                    // æ¸…ç†URLå¯¹è±¡
                    setTimeout(() => URL.revokeObjectURL(url), 100);

                    this.showToast(`æˆåŠŸå¯¼å‡º ${this.customWords.length} ä¸ªè¯æ±‡`, 'success');
                } catch (error) {
                    console.error('å¯¼å‡ºå¤±è´¥:', error);
                    this.showToast('å¯¼å‡ºå¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
                }
            }
        }

        // æ·»åŠ é”®ç›˜å¿«æ·é”®æ”¯æŒ
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                // é˜²æ­¢åœ¨è¾“å…¥æ¡†ä¸­è§¦å‘å¿«æ·é”®
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                    return;
                }

                // ç©ºæ ¼é”®å¼€å§‹æ¸¸æˆ
                if (e.code === 'Space' && !game.isPlaying && !game.gameOver) {
                    e.preventDefault();
                    game.startGame();
                    return;
                }

                // Escapeé”®æš‚åœ/ç»§ç»­æ¸¸æˆ
                if (e.code === 'Escape' && game.isPlaying) {
                    e.preventDefault();
                    game.togglePause();
                    return;
                }

                // Ré”®é‡æ–°å¼€å§‹
                if (e.code === 'KeyR' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    game.resetGame();
                    return;
                }

                // Lé”®æ˜¾ç¤ºæ’è¡Œæ¦œ
                if (e.code === 'KeyL' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    game.showLeaderboard();
                    return;
                }

                // Mé”®åˆ‡æ¢éŸ³é¢‘
                if (e.code === 'KeyM' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    game.toggleAudio();
                    return;
                }

                // Hé”®æ˜¾ç¤ºå¸®åŠ©
                if (e.code === 'KeyH' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    game.showHelp();
                    return;
                }

                // æ•°å­—é”®1-4åˆ‡æ¢éš¾åº¦
                if (e.code >= 'Digit1' && e.code <= 'Digit4' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    const difficultyIndex = parseInt(e.code.slice(-1)) - 1;
                    const difficulties = ['easy', 'medium', 'hard', 'extreme'];
                    if (difficulties[difficultyIndex]) {
                        game.setDifficulty(difficulties[difficultyIndex]);
                    }
                    return;
                }

                // Cé”®åˆ‡æ¢è¯­è¨€
                if (e.code === 'KeyC' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    game.toggleLanguage();
                    return;
                }
            });

            // Ctrl/Cmd + Enter åœ¨è¾“å…¥æ¡†ä¸­å¿«é€Ÿå¼€å§‹æ¸¸æˆ
            document.addEventListener('keydown', (e) => {
                if ((e.ctrlKey || e.metaKey) && e.code === 'Enter' && !game.isPlaying) {
                    e.preventDefault();
                    game.startGame();
                }
            });
        }

        // æ·»åŠ å…¨å±æ”¯æŒ
        function setupFullscreen() {
            const fullscreenBtn = document.createElement('button');
            fullscreenBtn.innerHTML = 'â›¶';
            fullscreenBtn.className = 'fullscreen-btn';
            fullscreenBtn.title = 'å…¨å±æ¨¡å¼ (F)';
            fullscreenBtn.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(0, 255, 0, 0.1);
                border: 2px solid #00ff00;
                color: #00ff00;
                padding: 10px;
                cursor: pointer;
                border-radius: 5px;
                font-size: 18px;
                z-index: 1000;
                transition: all 0.3s ease;
            `;

            fullscreenBtn.addEventListener('mouseenter', () => {
                fullscreenBtn.style.backgroundColor = 'rgba(0, 255, 0, 0.3)';
                fullscreenBtn.style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.6)';
            });

            fullscreenBtn.addEventListener('mouseleave', () => {
                fullscreenBtn.style.backgroundColor = 'rgba(0, 255, 0, 0.1)';
                fullscreenBtn.style.boxShadow = 'none';
            });

            fullscreenBtn.addEventListener('click', () => {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(err => {
                        console.error('æ— æ³•è¿›å…¥å…¨å±æ¨¡å¼:', err);
                    });
                } else {
                    document.exitFullscreen();
                }
            });

            // Fé”®åˆ‡æ¢å…¨å±
            document.addEventListener('keydown', (e) => {
                if (e.code === 'KeyF' && !e.ctrlKey && !e.metaKey && e.target.tagName !== 'INPUT') {
                    e.preventDefault();
                    fullscreenBtn.click();
                }
            });

            document.body.appendChild(fullscreenBtn);
        }

        // æ·»åŠ é¡µé¢å¯è§æ€§APIæ”¯æŒ
        function setupVisibilityAPI() {
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    // é¡µé¢éšè—æ—¶æš‚åœæ¸¸æˆ
                    if (game.isPlaying && !game.isPaused) {
                        game.pauseGame();
                    }
                }
            });
        }

        // æ·»åŠ åœ¨çº¿/ç¦»çº¿çŠ¶æ€æ£€æµ‹
        function setupOnlineStatus() {
            function updateOnlineStatus() {
                const indicator = document.createElement('div');
                indicator.id = 'online-status';
                indicator.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    left: 20px;
                    padding: 8px 12px;
                    border-radius: 3px;
                    font-size: 12px;
                    font-weight: bold;
                    z-index: 1000;
                    transition: all 0.3s ease;
                    ${navigator.onLine ?
                        'background: rgba(0, 255, 0, 0.2); color: #00ff00; border: 1px solid #00ff00;' :
                        'background: rgba(255, 0, 0, 0.2); color: #ff0000; border: 1px solid #ff0000;'
                    }
                `;
                indicator.textContent = navigator.onLine ? 'ğŸŒ åœ¨çº¿' : 'ğŸ“´ ç¦»çº¿';

                // ç§»é™¤æ—§çš„æŒ‡ç¤ºå™¨
                const oldIndicator = document.getElementById('online-status');
                if (oldIndicator) {
                    oldIndicator.remove();
                }

                document.body.appendChild(indicator);

                // 3ç§’åè‡ªåŠ¨éšè—
                setTimeout(() => {
                    if (indicator && indicator.parentNode) {
                        indicator.style.opacity = '0';
                        setTimeout(() => {
                            if (indicator.parentNode) {
                                indicator.remove();
                            }
                        }, 300);
                    }
                }, 3000);
            }

            window.addEventListener('online', updateOnlineStatus);
            window.addEventListener('offline', updateOnlineStatus);

            // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºä¸€æ¬¡çŠ¶æ€
            setTimeout(updateOnlineStatus, 1000);
        }

        // æ·»åŠ Service Workeræ³¨å†Œï¼ˆç”¨äºPWAæ”¯æŒï¼‰
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('Service Workeræ³¨å†ŒæˆåŠŸ:', registration);
                    })
                    .catch(error => {
                        console.log('Service Workeræ³¨å†Œå¤±è´¥:', error);
                    });
            }
        }

        // æ·»åŠ æ€§èƒ½ç›‘æ§
        function setupPerformanceMonitoring() {
            // ç›‘æ§æ¸¸æˆæ€§èƒ½
            let frameCount = 0;
            let lastTime = performance.now();

            function measureFPS() {
                frameCount++;
                const currentTime = performance.now();

                if (currentTime >= lastTime + 1000) {
                    const fps = Math.round((frameCount * 1000) / (currentTime - lastTime));

                    // å¦‚æœFPSè¿‡ä½ï¼Œåœ¨æ§åˆ¶å°è­¦å‘Š
                    if (fps < 30) {
                        console.warn(`æ¸¸æˆæ€§èƒ½è¾ƒä½: ${fps} FPS`);
                    }

                    frameCount = 0;
                    lastTime = currentTime;
                }

                requestAnimationFrame(measureFPS);
            }

            // å¯åŠ¨FPSç›‘æ§
            requestAnimationFrame(measureFPS);
        }

        // é”™è¯¯å¤„ç†å’ŒæŠ¥å‘Š
        function setupErrorHandling() {
            window.addEventListener('error', (event) => {
                console.error('æ¸¸æˆè¿è¡Œé”™è¯¯:', event.error);

                // åœ¨å¼€å‘ç¯å¢ƒä¸­æ˜¾ç¤ºé”™è¯¯æç¤º
                if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                    game.showToast('å‘ç”Ÿé”™è¯¯ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°', 'error');
                }
            });

            window.addEventListener('unhandledrejection', (event) => {
                console.error('æœªå¤„ç†çš„Promiseé”™è¯¯:', event.reason);
                event.preventDefault();
            });
        }

        // æ‰©å±•æ¸¸æˆç±»åŠŸèƒ½
        Object.assign(TypingGame.prototype, {
            // æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
            showHelp() {
                const helpContent = `
ğŸ® é”®ç›˜å¿«æ·é”®ï¼š

ç©ºæ ¼é”® - å¼€å§‹æ¸¸æˆ
Esc - æš‚åœ/ç»§ç»­
R - é‡æ–°å¼€å§‹
L - æ’è¡Œæ¦œ
M - éŸ³é¢‘å¼€å…³
H - æ˜¾ç¤ºå¸®åŠ©
F - å…¨å±æ¨¡å¼
1-4 - åˆ‡æ¢éš¾åº¦
C - åˆ‡æ¢è¯­è¨€
Ctrl+Enter - å¿«é€Ÿå¼€å§‹

ğŸ“Š ç»Ÿè®¡ä¿¡æ¯ï¼š
WPM - æ¯åˆ†é’Ÿå­—æ•°
å‡†ç¡®ç‡ - è¾“å…¥æ­£ç¡®ç‡
å¾—åˆ† - æ ¹æ®éš¾åº¦è®¡ç®—

ğŸ’¡ æç¤ºï¼š
â€¢ ç»¿è‰²å­—ç¬¦è¡¨ç¤ºæ­£ç¡®
â€¢ çº¢è‰²å­—ç¬¦è¡¨ç¤ºé”™è¯¯
â€¢ ç°è‰²å­—ç¬¦è¡¨ç¤ºå¾…è¾“å…¥
                `;

                alert(helpContent);
            },

            // æš‚åœ/ç»§ç»­æ¸¸æˆ
            togglePause() {
                if (this.isPaused) {
                    this.resumeGame();
                } else {
                    this.pauseGame();
                }
            },

            pauseGame() {
                if (!this.isPlaying || this.isPaused) return;

                this.isPaused = true;
                this.showToast('æ¸¸æˆå·²æš‚åœ', 'success');
            },

            resumeGame() {
                if (!this.isPlaying || !this.isPaused) return;

                this.isPaused = false;
                this.showToast('æ¸¸æˆç»§ç»­', 'success');
                this.elements.textInput.focus();
            },

            // è®¾ç½®éš¾åº¦
            setDifficulty(difficulty) {
                if (this.isPlaying) return;

                this.currentDifficulty = difficulty;

                // æ›´æ–°UI
                document.querySelectorAll('.difficulty-btn').forEach(btn => {
                    btn.classList.remove('active');
                });

                const activeBtn = document.querySelector(`[data-difficulty="${difficulty}"]`);
                if (activeBtn) {
                    activeBtn.classList.add('active');
                }

                const difficultyNames = {
                    easy: 'å°å­¦å››å¹´çº§',
                    medium: 'å°å­¦äº”å…­å¹´çº§',
                    hard: 'åˆä¸­ä¸€ã€äºŒå¹´çº§',
                    extreme: 'åˆä¸­ä¸‰å¹´çº§åˆ°é«˜ä¸­',
                    university: 'å¤§å­¦é˜¶æ®µ',
                    graduate: 'ç ”ç©¶ç”Ÿé˜¶æ®µ'
                };

                this.showToast(`éš¾åº¦: ${difficultyNames[difficulty]}`, 'success');
            },

            // åˆ‡æ¢è¯­è¨€
            toggleLanguage() {
                if (this.isPlaying) return;

                const newLanguage = this.currentLanguage === 'chinese' ? 'english' : 'chinese';
                this.setLanguage(newLanguage);
            },

            // è¯­è¨€è®¾ç½®
            setLanguage(language) {
                this.currentLanguage = language;

                // æ›´æ–°UI
                document.querySelectorAll('.language-btn').forEach(btn => {
                    btn.classList.remove('active');
                });

                const activeBtn = document.querySelector(`[data-language="${language}"]`);
                if (activeBtn) {
                    activeBtn.classList.add('active');
                }

                this.showToast(language === 'chinese' ? 'ä¸­æ–‡æ¨¡å¼' : 'English Mode', 'success');
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // åˆå§‹åŒ–æ¸¸æˆ
            const game = new TypingGame();
            game.bindEvents();  // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨

            // è®¾ç½®å„ç§åŠŸèƒ½
            setupKeyboardShortcuts();
            setupFullscreen();
            setupVisibilityAPI();
            setupOnlineStatus();
            setupPerformanceMonitoring();
            setupErrorHandling();

            // å°è¯•æ³¨å†ŒService Worker
            registerServiceWorker();

            // æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
            setTimeout(() => {
                game.showToast('æ¬¢è¿ï¼æŒ‰ç©ºæ ¼é”®å¼€å§‹æ¸¸æˆï¼ŒHé”®æŸ¥çœ‹å¸®åŠ©', 'success');
            }, 1000);

            // å…¨å±€æš´éœ²æ¸¸æˆå®ä¾‹ï¼Œä¾¿äºè°ƒè¯•
            window.game = game;
        });
    </script>
</body>
</html>